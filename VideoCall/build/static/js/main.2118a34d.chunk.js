(this["webpackJsonptwilio-video-app-react"]=this["webpackJsonptwilio-video-app-react"]||[]).push([[0],{162:function(e){e.exports=JSON.parse('{"a":"0.2.2"}')},310:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),c=n(14),a=n.n(c),o=n(365),s=n(364),l=n(8),d=n(372),u=n(160),j=n(371),b=n(347),h=n(4),f=n(5),m=n(1),v=Object(i.createContext)(null);function O(){var e=Object(i.useContext)(v),t=Object(f.a)(e,2);return[t[0],t[1]]}function p(e){var t=e.room,n=e.children,r=Object(i.useState)(null),c=Object(f.a)(r,2),a=c[0],o=c[1];return Object(i.useEffect)((function(){var e=function(){return o(null)},n=function(e){return o((function(t){return t===e?null:t}))};return t.on("disconnected",e),t.on("participantDisconnected",n),function(){t.off("disconnected",e),t.off("participantDisconnected",n)}}),[t]),Object(m.jsx)(v.Provider,{value:[a,function(e){return o((function(t){return t===e?null:e}))}],children:n})}var x=n(159),g=n.n(x),w="undefined"!==typeof navigator&&"string"===typeof navigator.userAgent&&/Mobile/.test(navigator.userAgent);function k(e){if(!g()(e))return e;var t={};for(var n in e){var i=e[n];"undefined"!==typeof i&&(t[n]=k(i))}return t}function C(){var e=M(),t=e.room.localParticipant,n=e.localTracks,r=e.getLocalVideoTrack,c=e.removeLocalVideoTrack,a=e.onError,o=n.find((function(e){return e.name.includes("camera")})),s=Object(i.useState)(!1),l=Object(f.a)(s,2),d=l[0],u=l[1],j=Object(i.useCallback)((function(){if(!d)if(o){var e=null===t||void 0===t?void 0:t.unpublishTrack(o);null===t||void 0===t||t.emit("trackUnpublished",e),c()}else u(!0),r().then((function(e){return null===t||void 0===t?void 0:t.publishTrack(e,{priority:"low"})})).catch(a).finally((function(){return u(!1)}))}),[o,t,r,d,a,c]);return[!!o,j]}function S(){var e=M().room,t=C(),n=Object(f.a)(t,2),r=n[0],c=n[1],a=Object(i.useRef)(!1);return Object(i.useEffect)((function(){if(w){var e=function(){"hidden"===document.visibilityState&&r?(a.current=!0,c()):a.current&&(a.current=!1,c())};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}}),[r,e,c]),null}var y=n(15),E={width:1280,height:720,frameRate:24},T="TwilioVideoApp-selectedAudioInput",P="TwilioVideoApp-selectedAudioOutput",N="TwilioVideoApp-selectedVideoInput",A=n(22),L=n.n(A);function D(){var e=Object(i.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){var e=function(){return navigator.mediaDevices.enumerateDevices().then((function(e){return r(e)}))};return navigator.mediaDevices.addEventListener("devicechange",e),e(),function(){navigator.mediaDevices.removeEventListener("devicechange",e)}}),[]),{audioInputDevices:n.filter((function(e){return"audioinput"===e.kind})),videoInputDevices:n.filter((function(e){return"videoinput"===e.kind})),audioOutputDevices:n.filter((function(e){return"audiooutput"===e.kind})),hasAudioInputDevices:n.filter((function(e){return"audioinput"===e.kind})).length>0,hasVideoInputDevices:n.filter((function(e){return"videoinput"===e.kind})).length>0}}var R=n(18),I=n.n(R);window.TwilioVideo=L.a;var B=Object(i.createContext)(null);function _(e){var t=e.options,n=e.children,r=e.onError,c=void 0===r?function(){}:r,a=e.onDisconnect,o=void 0===a?function(){}:a,s=function(e){console.log("ERROR: ".concat(e.message),e),c(e)},l=function(){var e=Object(i.useState)(),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(),a=Object(f.a)(c,2),o=a[0],s=a[1],l=Object(i.useState)(!1),d=Object(f.a)(l,2),u=d[0],j=d[1],b=D(),h=b.audioInputDevices,m=b.videoInputDevices,v=b.hasAudioInputDevices,O=b.hasVideoInputDevices,p=Object(i.useCallback)((function(e){var t={};return e&&(t.deviceId={exact:e}),L.a.createLocalAudioTrack(t).then((function(e){return r(e),e}))}),[]),x=Object(i.useCallback)((function(){var e=window.localStorage.getItem(N),t=m.some((function(t){return e&&t.deviceId===e})),n=Object(y.a)(Object(y.a)({},E),{},{name:"camera-".concat(Date.now())},t&&{deviceId:{exact:e}});return L.a.createLocalVideoTrack(n).then((function(e){return s(e),e}))}),[m]),g=Object(i.useCallback)((function(){n&&(n.stop(),r(void 0))}),[n]),w=Object(i.useCallback)((function(){o&&(o.stop(),s(void 0))}),[o]),k=Object(i.useCallback)((function(){if(!v&&!O)return Promise.resolve();if(u||n||o)return Promise.resolve();j(!0);var e=window.localStorage.getItem(T),t=window.localStorage.getItem(N),i=h.some((function(t){return e&&t.deviceId===e})),c=m.some((function(e){return t&&e.deviceId===t})),a={video:O&&Object(y.a)(Object(y.a)({},E),{},{name:"camera-".concat(Date.now())},c&&{deviceId:{exact:t}}),audio:i?{deviceId:{exact:e}}:v};return L.a.createLocalTracks(a).then((function(e){var t=e.find((function(e){return"video"===e.kind})),n=e.find((function(e){return"audio"===e.kind}));t&&s(t),n&&r(n)})).finally((function(){return j(!1)}))}),[v,O,n,o,h,m,u]);return{localTracks:[n,o].filter((function(e){return void 0!==e})),getLocalVideoTrack:x,getLocalAudioTrack:p,isAcquiringLocalTracks:u,removeLocalAudioTrack:g,removeLocalVideoTrack:w,getAudioAndVideoTracks:k}}(),d=l.localTracks,u=l.getLocalVideoTrack,j=l.getLocalAudioTrack,b=l.isAcquiringLocalTracks,h=l.removeLocalAudioTrack,v=l.removeLocalVideoTrack,O=l.getAudioAndVideoTracks,x=function(e,t,n){var r=Object(i.useState)(new I.a),c=Object(f.a)(r,2),a=c[0],o=c[1],s=Object(i.useState)(!1),l=Object(f.a)(s,2),d=l[0],u=l[1],j=Object(i.useRef)(n);return Object(i.useEffect)((function(){j.current=n}),[n]),{room:a,isConnecting:d,connect:Object(i.useCallback)((function(n){return u(!0),L.a.connect(n,Object(y.a)(Object(y.a)({},j.current),{},{tracks:e})).then((function(e){o(e);var t=function(){return e.disconnect()};e.setMaxListeners(15),e.once("disconnected",(function(){setTimeout((function(){return o(new I.a)})),window.removeEventListener("beforeunload",t),w&&window.removeEventListener("pagehide",t)})),window.twilioRoom=e,e.localParticipant.videoTracks.forEach((function(e){return e.setPriority("low")})),u(!1),window.addEventListener("beforeunload",t),w&&window.addEventListener("pagehide",t)}),(function(e){t(e),u(!1)}))}),[e,t])}}(d,s,t),g=x.room,k=x.isConnecting,C=x.connect;!function(e,t){Object(i.useEffect)((function(){var n=function(e,n){n&&t(n)};return e.on("disconnected",n),function(){e.off("disconnected",n)}}),[e,t])}(g,c),function(e,t){var n=e.localParticipant;Object(i.useEffect)((function(){if(n)return n.on("trackPublicationFailed",t),function(){n.off("trackPublicationFailed",t)}}),[n,t])}(g,c),function(e,t){Object(i.useEffect)((function(){return e.on("disconnected",t),function(){e.off("disconnected",t)}}),[e,t])}(g,o);var P=function(e,t){var n=Object(i.useState)(!1),r=Object(f.a)(n,2),c=r[0],a=r[1],o=Object(i.useRef)(null),s=Object(i.useCallback)((function(){navigator.mediaDevices.getDisplayMedia({audio:!1,video:{frameRate:10,height:1080,width:1920}}).then((function(n){var i=n.getTracks()[0];e.localParticipant.publishTrack(i,{name:"screen",priority:"low"}).then((function(t){o.current=function(){e.localParticipant.unpublishTrack(i),e.localParticipant.emit("trackUnpublished",t),i.stop(),a(!1)},i.onended=o.current,a(!0)})).catch(t)})).catch((function(e){"AbortError"!==e.name&&"NotAllowedError"!==e.name&&t(e)}))}),[e,t]),l=Object(i.useCallback)((function(){c?o.current():s()}),[c,s,o]);return[c,l]}(g,c),A=Object(f.a)(P,2),R=A[0],_=A[1];return Object(m.jsxs)(B.Provider,{value:{room:g,localTracks:d,isConnecting:k,onError:s,onDisconnect:o,getLocalVideoTrack:u,getLocalAudioTrack:j,connect:C,isAcquiringLocalTracks:b,removeLocalAudioTrack:h,removeLocalVideoTrack:v,isSharingScreen:R,toggleScreenShare:_,getAudioAndVideoTracks:O},children:[Object(m.jsx)(p,{room:g,children:n}),Object(m.jsx)(S,{})]})}function M(){var e=Object(i.useContext)(B);if(!e)throw new Error("useVideoContext must be used within a VideoProvider");return e}var z=Object(u.a)((function(e){return Object(j.a)({button:{background:e.brand,color:"white","&:hover":{background:"#600101"}}})}));function H(e){var t=z(),n=M(),i=n.room,r=n.isSharingScreen,c=n.toggleScreenShare,a=n.removeLocalAudioTrack,o=n.removeLocalVideoTrack;return Object(m.jsx)(b.a,{onClick:function(){r&&c(),a(),o(),i.disconnect()},className:Object(h.a)(t.button,e.className),"data-cy-disconnect":!0,children:"Disconnect"})}function F(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",children:Object(m.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(m.jsx)("g",{fill:"#707578",children:Object(m.jsx)("path",{d:"M12 3.5c4.694 0 8.5 3.806 8.5 8.5s-3.806 8.5-8.5 8.5-8.5-3.806-8.5-8.5S7.306 3.5 12 3.5zm0 1c-4.142 0-7.5 3.358-7.5 7.5 0 4.142 3.358 7.5 7.5 7.5 4.142 0 7.5-3.358 7.5-7.5 0-4.142-3.358-7.5-7.5-7.5zm1.367 3.429C14.959 8.492 16.1 10.215 16.1 12c0 1.16-.481 2.294-1.256 3.1h.356c.245 0 .45.177.492.41l.008.09c0 .245-.177.45-.41.492l-.09.008h-2.008l-.048-.003-.034-.005c-.088-.017-.167-.055-.233-.11l-.06-.06c-.037-.044-.067-.096-.087-.151l-.001-.004-.012-.04c-.004-.012-.007-.024-.009-.037v-.005c-.005-.024-.006-.042-.007-.06L12.7 13.6c0-.276.224-.5.5-.5.245 0 .45.177.492.41l.008.09v1.176c.833-.6 1.4-1.676 1.4-2.776 0-1.373-.886-2.71-2.067-3.129-.26-.092-.396-.377-.304-.638.092-.26.378-.396.638-.304zm-2.559-.03c.03.001.058.004.086.01l.062.016.018.006c.04.015.075.034.108.056.086.059.152.143.188.242l.001.004.008.025c.006.017.01.034.013.052l.008.09v2c0 .276-.224.5-.5.5-.245 0-.45-.177-.492-.41l-.008-.09V9.224c-.833.6-1.4 1.676-1.4 2.776 0 1.373.886 2.71 2.067 3.129.26.092.396.377.304.638-.092.26-.378.396-.638.304C9.041 15.508 7.9 13.785 7.9 12c0-1.16.481-2.294 1.255-3.1H8.8c-.245 0-.45-.177-.492-.41L8.3 8.4c0-.245.177-.45.41-.492L8.8 7.9h2.008z",transform:"translate(-233 -689) translate(-1 673) translate(37 16) translate(197.298)"})})})})}function V(e){var t=Object(i.useState)(null===e||void 0===e?void 0:e.mediaStreamTrack),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){if(c(null===e||void 0===e?void 0:e.mediaStreamTrack),e){var t=function(){return c(e.mediaStreamTrack)};return e.on("started",t),function(){e.off("started",t)}}}),[e]),r}function W(){var e=M().localTracks,t=Object(i.useState)(null),n=Object(f.a)(t,2),r=n[0],c=n[1],a=e.find((function(e){return e.name.includes("camera")})),o=V(a),s=D().videoInputDevices;Object(i.useEffect)((function(){(null===o||void 0===o?void 0:o.getSettings().facingMode)&&null===r&&c(!0)}),[o,r]);var l=Object(i.useCallback)((function(){var e="user"===(null===o||void 0===o?void 0:o.getSettings().facingMode)?"environment":"user";a.restart(Object(y.a)(Object(y.a)({},E),{},{facingMode:e}))}),[o,a]);return r&&s.length>1?Object(m.jsx)(b.a,{onClick:l,disabled:!a,startIcon:Object(m.jsx)(F,{}),children:"Flip Camera"}):null}var U=n(369),K=n(354),G=n(352),Y=n(353),q=n(350),J=n(351),Q=n(162),Z=n(38),X=n.n(Z),$=n(60),ee={trackSwitchOffMode:void 0,dominantSpeakerPriority:"standard",bandwidthProfileMode:"collaboration",maxTracks:w?"5":"10",maxAudioBitrate:"16000",renderDimensionLow:"low",renderDimensionStandard:"960p",renderDimensionHigh:"wide1080p"},te=function(){var e={};for(var t in ee)e[t]=t;return e}();function ne(e,t){return Object(y.a)(Object(y.a)({},e),{},Object(l.a)({},t.name,"default"===t.value?void 0:t.value))}n(66),n(306),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_FIREBASE_API_KEY,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_FIREBASE_AUTH_DOMAIN,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_FIREBASE_DATABASE_URL,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_FIREBASE_STORAGE_BUCKET,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_FIREBASE_MESSAGING_SENDER_ID;var ie=n(44);function re(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return fetch("/token",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({user_identity:e,room_name:t,passcode:n,create_room:i})})}function ce(e){return re("temp-name","temp-room",e,!1).then(function(){var e=Object($.a)(X.a.mark((function e(t){var n,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,401!==t.status){e.next=5;break}return e.abrupt("return",{isValid:!1,error:null===(i=n.error)||void 0===i?void 0:i.message});case 5:if(!t.ok||!n.token){e.next=7;break}return e.abrupt("return",{isValid:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function ae(e){switch(e){case"passcode incorrect":return"Passcode is incorrect";case"passcode expired":return"Passcode has expired";default:return e}}function oe(){var e=Object(ie.g)(),t=Object(i.useState)(null),n=Object(f.a)(t,2),r=n[0],c=n[1],a=Object(i.useState)(!1),o=Object(f.a)(a,2),s=o[0],l=o[1],d=Object(i.useState)(),u=Object(f.a)(d,2),j=u[0],b=u[1],h=Object(i.useCallback)((function(e,t){return re(e,t,r.passcode).then(function(){var e=Object($.a)(X.a.mark((function e(t){var n,i,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,t.json();case 4:throw i=e.sent,r=ae((null===(n=i.error)||void 0===n?void 0:n.message)||t.statusText),Error(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e.json()})).then((function(e){return b(e.room_type),e.token}))}),[r]);Object(i.useEffect)((function(){var t=function(){var e=window.location.search.match(/passcode=(.*)&?/);return e?e[1]:window.sessionStorage.getItem("passcode")}();t?ce(t).then((function(n){(null===n||void 0===n?void 0:n.isValid)&&(c({passcode:t}),window.sessionStorage.setItem("passcode",t),e.replace(window.location.pathname))})).then((function(){return l(!0)})):l(!0)}),[e]);var m=Object(i.useCallback)((function(e){return ce(e).then((function(t){if(!(null===t||void 0===t?void 0:t.isValid))throw new Error(ae(null===t||void 0===t?void 0:t.error));c({passcode:e}),window.sessionStorage.setItem("passcode",e)}))}),[]),v=Object(i.useCallback)((function(){return c(null),window.sessionStorage.removeItem("passcode"),Promise.resolve()}),[]);return{user:r,isAuthReady:s,getToken:h,signIn:m,signOut:v,roomType:j}}var se=Object(i.createContext)(null);function le(e){var t=Object(i.useState)(null),n=Object(f.a)(t,2),r=n[0],c=n[1],a=Object(i.useState)(!1),o=Object(f.a)(a,2),s=o[0],l=o[1],d=function(){var e=D().audioOutputDevices,t=Object(i.useState)("default"),n=Object(f.a)(t,2),r=n[0],c=n[1],a=Object(i.useCallback)((function(e){window.localStorage.setItem(P,e),c(e)}),[c]);return Object(i.useEffect)((function(){var t=window.localStorage.getItem(P);e.some((function(e){return t&&e.deviceId===t}))&&c(t)}),[e]),[r,a]}(),u=Object(f.a)(d,2),j=u[0],b=u[1],h=Object(i.useReducer)(ne,ee),v=Object(f.a)(h,2),O=v[0],p=v[1],x={error:r,setError:c,isFetching:s,activeSinkId:j,setActiveSinkId:b,settings:O,dispatchSetting:p};x=Object(y.a)(Object(y.a)({},x),oe());return Object(m.jsx)(se.Provider,{value:Object(y.a)(Object(y.a)({},x),{},{getToken:function(e,t){return l(!0),x.getToken(e,t).then((function(e){return l(!1),e})).catch((function(e){return c(e),l(!1),Promise.reject(e)}))}}),children:e.children})}function de(){var e=Object(i.useContext)(se);if(!e)throw new Error("useAppState must be used within the AppStateProvider");return e}var ue=function(e){var t=e.open,n=e.onClose,i=de().roomType;return Object(m.jsxs)(U.a,{open:t,onClose:n,fullWidth:!0,maxWidth:"xs",children:[Object(m.jsx)(q.a,{children:"About"}),Object(m.jsx)(J.a,{}),Object(m.jsxs)(G.a,{children:[Object(m.jsxs)(Y.a,{children:["Browser supported: ",String(L.a.isSupported)]}),Object(m.jsxs)(Y.a,{children:["SDK Version: ",L.a.version]}),Object(m.jsxs)(Y.a,{children:["App Version: ",Q.a]}),Object(m.jsxs)(Y.a,{children:["Deployed Tag: ",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_GIT_TAG||"N/A"]}),Object(m.jsxs)(Y.a,{children:["Deployed Commit Hash: ",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SET_AUTH:"passcode"}).REACT_APP_GIT_COMMIT||"N/A"]}),i&&Object(m.jsxs)(Y.a,{children:["Room Type: ",i]})]}),Object(m.jsx)(J.a,{}),Object(m.jsx)(K.a,{children:Object(m.jsx)(b.a,{onClick:n,color:"primary",variant:"contained",autoFocus:!0,children:"OK"})})]})},je=n(379);function be(e){var t=Object(i.useState)(!!e&&e.isEnabled),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){if(c(!!e&&e.isEnabled),e){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("enabled",t),e.on("disabled",n),function(){e.off("enabled",t),e.off("disabled",n)}}}),[e]),r}var he,fe=0,me=window.AudioContext||window.webkitAudioContext;function ve(e){var t=(he=he||new me).createMediaStreamSource(e),n=he.createAnalyser();return n.smoothingTimeConstant=.2,n.fftSize=256,t.connect(n),n}function Oe(e){var t=e.audioTrack,n=e.color,r=void 0===n?"white":n,c=Object(i.useRef)(null),a=Object(i.useState)(),o=Object(f.a)(a,2),s=o[0],l=o[1],d=be(t),u=V(t);Object(i.useEffect)((function(){if(t&&u&&d){var e=new MediaStream([u.clone()]),n=function(){return e.getTracks().forEach((function(e){return e.stop()}))};t.on("stopped",n);var i=function(){n(),e=new MediaStream([u.clone()]),l(ve(e))};return l(ve(e)),window.addEventListener("focus",i),function(){n(),window.removeEventListener("focus",i),t.off("stopped",n)}}}),[d,u,t]),Object(i.useEffect)((function(){var e=c.current;if(d&&e&&s){var t=new Uint8Array(s.frequencyBinCount),n=Object(je.a)((function(){s.getByteFrequencyData(t);for(var n=0,i=t.length,r=0;r<i;r++)n+=t[r];var c=Math.min(14,Math.max(0,7*Math.log10(n/i/3)));null===e||void 0===e||e.setAttribute("y",String(14-c))}),100);return function(){e.setAttribute("y","14"),n.stop()}}}),[d,s]);var j="audio-level-clip-".concat(fe++);return d?Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-test-audio-indicator":!0,children:[Object(m.jsx)("defs",{children:Object(m.jsx)("clipPath",{id:j,children:Object(m.jsx)("rect",{ref:c,x:"0",y:"14",width:"24",height:"24"})})}),Object(m.jsxs)("g",{fill:"none",fillRule:"evenodd",transform:"translate(.5)",children:[Object(m.jsx)("rect",{clipPath:"url(#".concat(j,")"),width:"5.2",height:"10",x:"9.5",y:"3.5",rx:"6",ry:"3",fill:"#23BF6E"}),Object(m.jsx)("path",{fill:r,strokeWidth:"0",d:"M17.389 10.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V17.09C8.395 16.836 6 14.281 6 11.167c0-.276.224-.5.5-.5s.5.224.5.5c0 2.73 2.214 4.944 4.944 4.944 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM11.944 4c1.566 0 2.834 1.268 2.834 2.833v4.334c0 1.564-1.268 2.833-2.834 2.833-1.564 0-2.833-1.27-2.833-2.833V6.833C9.111 5.268 10.38 4 11.944 4zm0 1c-1.012 0-1.833.82-1.833 1.833v4.334c0 1.012.822 1.833 1.833 1.833 1.013 0 1.834-.82 1.834-1.833V6.833c0-1.013-.82-1.833-1.834-1.833z"})]})]}):Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",transform:"translate(-0.5, 0)","data-test-audio-mute-icon":!0,children:Object(m.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(m.jsx)("path",{fill:r,strokeWidth:"0",d:"M11.889 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09c-1.116-.093-2.145-.494-3-1.119l.717-.717c.793.54 1.751.857 2.783.857 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM1 6.667c.276 0 .5.224.5.5 0 .975.282 1.884.77 2.65l-.722.721C.888 9.58.5 8.418.5 7.167c0-.276.224-.5.5-.5zm8.277-1.031v1.53C9.278 8.732 8.01 10 6.445 10c-.446 0-.868-.103-1.243-.287l.776-.773c.149.039.306.06.467.06.963 0 1.751-.74 1.828-1.683l.006-.15v-.531l1-1zM6.444 0C8.01 0 9.278 1.268 9.278 2.833l-.002-.025-.999.999v-.974c0-.962-.74-1.75-1.682-1.827L6.445 1c-.962 0-1.751.74-1.828 1.683l-.006.15v4.334c0 .097.008.192.022.285l-.804.805c-.112-.269-.184-.558-.209-.86l-.009-.23V2.833C3.611 1.268 4.88 0 6.444 0z",transform:"translate(6.5 4)"}),Object(m.jsx)("path",{fill:"red",strokeWidth:"0",d:"M12.146.646c.196-.195.512-.195.708 0 .173.174.192.443.057.638l-.057.07-12 12c-.196.195-.512.195-.708 0-.173-.174-.192-.443-.057-.638l.057-.07 12-12z",transform:"translate(6.5 4)"})]})})}var pe=r.a.memo(Oe),xe=n(101),ge=n(355),we=n(356),ke=n(367),Ce=n(374);function Se(){var e=D().audioInputDevices,t=M().localTracks.find((function(e){return"audio"===e.kind})),n=V(t),i=null===n||void 0===n?void 0:n.getSettings().deviceId;return Object(m.jsxs)("div",{children:[Object(m.jsx)(xe.a,{variant:"subtitle2",gutterBottom:!0,children:"Audio Input"}),Object(m.jsxs)(ge.a,{container:!0,alignItems:"center",justify:"space-between",children:[Object(m.jsx)("div",{className:"inputSelect",children:e.length>1?Object(m.jsx)(we.a,{fullWidth:!0,children:Object(m.jsx)(ke.a,{onChange:function(e){return n=e.target.value,window.localStorage.setItem(T,n),void(null===t||void 0===t||t.restart({deviceId:{exact:n}}));var n},value:i||"",variant:"outlined",children:e.map((function(e){return Object(m.jsx)(Ce.a,{value:e.deviceId,children:e.label},e.deviceId)}))})}):Object(m.jsx)(xe.a,{children:(null===t||void 0===t?void 0:t.mediaStreamTrack.label)||"No Local Audio"})}),Object(m.jsx)(pe,{audioTrack:t,color:"black"})]})]})}function ye(){var e,t=D().audioOutputDevices,n=de(),i=n.activeSinkId,r=n.setActiveSinkId,c=null===(e=t.find((function(e){return e.deviceId===i})))||void 0===e?void 0:e.label;return Object(m.jsx)("div",{className:"inputSelect",children:t.length>1?Object(m.jsxs)(we.a,{fullWidth:!0,children:[Object(m.jsx)(xe.a,{variant:"subtitle2",gutterBottom:!0,children:"Audio Output"}),Object(m.jsx)(ke.a,{onChange:function(e){return r(e.target.value)},value:i,variant:"outlined",children:t.map((function(e){return Object(m.jsx)(Ce.a,{value:e.deviceId,children:e.label},e.deviceId)}))})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(xe.a,{variant:"subtitle2",children:"Audio Output"}),Object(m.jsx)(xe.a,{children:c||"System Default Audio Output"})]})})}var Ee=Object(d.a)("video")({width:"100%",height:"100%"});function Te(e){var t,n,r=e.track,c=e.isLocal,a=e.priority,o=Object(i.useRef)(null),s=V(r),l=function(e){var t=Object(i.useState)(null===e||void 0===e?void 0:e.dimensions),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){if(c(null===e||void 0===e?void 0:e.dimensions),e){var t=function(e){return c({width:e.dimensions.width,height:e.dimensions.height})};return e.on("dimensionsChanged",t),function(){e.off("dimensionsChanged",t)}}}),[e]),r}(r),d=(null!==(t=null===l||void 0===l?void 0:l.height)&&void 0!==t?t:0)>(null!==(n=null===l||void 0===l?void 0:l.width)&&void 0!==n?n:0);Object(i.useEffect)((function(){var e=o.current;return e.muted=!0,r.setPriority&&a&&r.setPriority(a),r.attach(e),function(){r.detach(e),r.setPriority&&a&&r.setPriority(null)}}),[r,a]);var u="environment"!==(null===s||void 0===s?void 0:s.getSettings().facingMode),j={transform:c&&u?"rotateY(180deg)":"",objectFit:d||r.name.includes("screen")?"contain":"cover"};return Object(m.jsx)(Ee,{ref:o,style:j})}var Pe=Object(u.a)({preview:{width:"300px",maxHeight:"200px",margin:"0.5em auto","& video":{maxHeight:"200px"}}});function Ne(){var e=Pe(),t=D().videoInputDevices,n=M().localTracks.find((function(e){return"video"===e.kind})),r=V(n),c=Object(i.useState)(window.localStorage.getItem(N)),a=Object(f.a)(c,2),o=a[0],s=a[1],l=(null===r||void 0===r?void 0:r.getSettings().deviceId)||o;return Object(m.jsxs)("div",{children:[n&&Object(m.jsx)("div",{className:e.preview,children:Object(m.jsx)(Te,{isLocal:!0,track:n})}),t.length>1?Object(m.jsxs)(we.a,{fullWidth:!0,children:[Object(m.jsx)(xe.a,{variant:"subtitle2",gutterBottom:!0,children:"Video Input"}),Object(m.jsx)(ke.a,{onChange:function(e){return t=e.target.value,s(t),window.localStorage.setItem(N,t),void(null===n||void 0===n||n.restart(Object(y.a)(Object(y.a)({},E),{},{deviceId:{exact:t}})));var t},value:l||"",variant:"outlined",children:t.map((function(e){return Object(m.jsx)(Ce.a,{value:e.deviceId,children:e.label},e.deviceId)}))})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(xe.a,{variant:"subtitle2",gutterBottom:!0,children:"Video Input"}),Object(m.jsx)(xe.a,{children:(null===n||void 0===n?void 0:n.mediaStreamTrack.label)||"No Local Video"})]})]})}var Ae=Object(u.a)((function(e){var t;return{container:(t={width:"600px",minHeight:"400px"},Object(l.a)(t,e.breakpoints.down("xs"),{width:"calc(100vw - 32px)"}),Object(l.a)(t,"& .inputSelect",{width:"calc(100% - 35px)"}),t),button:{float:"right"},paper:Object(l.a)({},e.breakpoints.down("xs"),{margin:"16px"}),headline:{marginBottom:"1.3em",fontSize:"1.1rem"},listSection:{margin:"2em 0 0.8em","&:first-child":{margin:"1em 0 2em 0"}}}}));function Le(e){var t=e.open,n=e.onClose,i=Ae();return Object(m.jsxs)(U.a,{open:t,onClose:n,classes:{paper:i.paper},children:[Object(m.jsx)(q.a,{children:"Audio and Video Settings"}),Object(m.jsx)(J.a,{}),Object(m.jsxs)(G.a,{className:i.container,children:[Object(m.jsxs)("div",{className:i.listSection,children:[Object(m.jsx)(xe.a,{variant:"h6",className:i.headline,children:"Video"}),Object(m.jsx)(Ne,{})]}),Object(m.jsx)(J.a,{}),Object(m.jsxs)("div",{className:i.listSection,children:[Object(m.jsx)(xe.a,{variant:"h6",className:i.headline,children:"Audio"}),Object(m.jsx)(Se,{})]}),Object(m.jsx)("div",{className:i.listSection,children:Object(m.jsx)(ye,{})})]}),Object(m.jsx)(J.a,{}),Object(m.jsx)(K.a,{children:Object(m.jsx)(b.a,{color:"primary",variant:"contained",className:i.button,onClick:n,children:"Done"})})]})}var De=n(97),Re=n.n(De),Ie=n(172),Be=n(84),_e=n.n(Be),Me=n(360);function ze(e){var t=Object(Me.a)((function(e){return e.breakpoints.down("sm")})),n=Object(i.useState)(!1),r=Object(f.a)(n,2),c=r[0],a=r[1],o=Object(i.useState)(!1),s=Object(f.a)(o,2),l=s[0],d=s[1],u=Object(i.useState)(!1),j=Object(f.a)(u,2),h=j[0],v=j[1],O=Object(i.useRef)(null);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b.a,{onClick:function(){return d((function(e){return!e}))},ref:O,className:e.buttonClassName,children:t?Object(m.jsx)(_e.a,{}):Object(m.jsxs)(m.Fragment,{children:["Settings",Object(m.jsx)(Re.a,{})]})}),Object(m.jsxs)(Ie.a,{open:l,onClose:function(){return d((function(e){return!e}))},anchorEl:O.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:t?-55:"bottom",horizontal:"center"},children:[Object(m.jsx)(Ce.a,{onClick:function(){return a(!0)},children:Object(m.jsx)(xe.a,{variant:"body1",children:"About"})}),Object(m.jsx)(Ce.a,{onClick:function(){return v(!0)},children:Object(m.jsx)(xe.a,{variant:"body1",children:"Audio and Video Settings"})})]}),Object(m.jsx)(ue,{open:c,onClose:function(){a(!1),d(!1)}}),Object(m.jsx)(Le,{open:h,onClose:function(){v(!1),d(!1)}})]})}function He(){var e=M().room,t=Object(i.useState)("disconnected"),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){var t=function(){return c(e.state||"disconnected")};return t(),e.on("disconnected",t).on("reconnected",t).on("reconnecting",t),function(){e.off("disconnected",t).off("reconnected",t).off("reconnecting",t)}}),[e]),r}var Fe=n(368);function Ve(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"17",viewBox:"0 0 12 17",children:Object(m.jsx)("path",{fill:"#707578",fillRule:"evenodd",d:"M11.389 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09C2.395 12.836 0 10.281 0 7.167c0-.276.224-.5.5-.5s.5.224.5.5c0 2.73 2.214 4.944 4.944 4.944 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM5.944 0C7.51 0 8.778 1.268 8.778 2.833v4.334C8.778 8.73 7.51 10 5.944 10 4.38 10 3.111 8.73 3.111 7.167V2.833C3.111 1.268 4.38 0 5.944 0zm0 1c-1.012 0-1.833.82-1.833 1.833v4.334C4.111 8.179 4.933 9 5.944 9c1.013 0 1.834-.82 1.834-1.833V2.833C7.778 1.82 6.958 1 5.944 1z"})})}function We(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",children:Object(m.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(m.jsx)("path",{fill:"#707578",d:"M11.889 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09c-1.116-.093-2.145-.494-3-1.119l.717-.717c.793.54 1.751.857 2.783.857 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM1 6.667c.276 0 .5.224.5.5 0 .975.282 1.884.77 2.65l-.722.721C.888 9.58.5 8.418.5 7.167c0-.276.224-.5.5-.5zm8.277-1.031v1.53C9.278 8.732 8.01 10 6.445 10c-.446 0-.868-.103-1.243-.287l.776-.773c.149.039.306.06.467.06.963 0 1.751-.74 1.828-1.683l.006-.15v-.531l1-1zM6.444 0C8.01 0 9.278 1.268 9.278 2.833l-.002-.025-.999.999v-.974c0-.962-.74-1.75-1.682-1.827L6.445 1c-.962 0-1.751.74-1.828 1.683l-.006.15v4.334c0 .097.008.192.022.285l-.804.805c-.112-.269-.184-.558-.209-.86l-.009-.23V2.833C3.611 1.268 4.88 0 6.444 0z",transform:"translate(6.5 4)"}),Object(m.jsx)("path",{fill:"red",d:"M12.146.646c.196-.195.512-.195.708 0 .173.174.192.443.057.638l-.057.07-12 12c-.196.195-.512.195-.708 0-.173-.174-.192-.443-.057-.638l.057-.07 12-12z",transform:"translate(6.5 4)"})]})})}function Ue(e){var t=function(){var e=M().localTracks.find((function(e){return"audio"===e.kind}));return[be(e),Object(i.useCallback)((function(){e&&(e.isEnabled?e.disable():e.enable())}),[e])]}(),n=Object(f.a)(t,2),r=n[0],c=n[1],a=M().localTracks.some((function(e){return"audio"===e.kind}));return Object(m.jsx)(b.a,{className:e.className,onClick:c,disabled:!a||e.disabled,startIcon:r?Object(m.jsx)(Ve,{}):Object(m.jsx)(We,{}),"data-cy-audio-toggle":!0,children:a?r?"Mute":"Unmute":"No Audio"})}function Ke(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(m.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(m.jsx)("path",{fill:"#707578",d:"M10.503.85c.32 0 .611.125.827.329l-.696.697c-.025-.018-.053-.032-.084-.038l-.047-.006H1.207c-.102 0-.19.071-.216.165l-.008.059v7.866c0 .101.07.189.165.215l.059.008h1.156l-.983.983h-.173c-.624 0-1.139-.476-1.2-1.083L0 9.922V2.056C0 1.433.476.917 1.084.856l.123-.007h9.296zm5.49 1.124l.007.082v7.866c0 .337-.328.566-.635.47l-.076-.03-3.58-1.79v1.35c0 .623-.476 1.138-1.083 1.2l-.123.006H4.16l.984-.983h5.359c.101 0 .189-.07.215-.164l.008-.06V4.564l.983-.982.353-.353 3.227-1.612c.301-.15.652.04.704.358zm-.977.876L11.71 4.504v2.967l3.307 1.654V2.85z",transform:"translate(4 6)"}),Object(m.jsx)("path",{fill:"red",fillRule:"nonzero",d:"M13.06.144c.192-.192.503-.192.695 0 .171.17.19.436.057.627l-.057.068-12.29 12.29c-.192.193-.503.193-.695 0-.171-.17-.19-.435-.057-.626l.057-.069L13.06.144z",transform:"translate(4 6)"})]})})}function Ge(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",children:Object(m.jsx)("path",{fill:"#707578",fillRule:"evenodd",d:"M15.003 7c.665 0 1.206.542 1.206 1.207v1.349l3.58-1.789c.301-.15.652.04.704.358l.007.082v7.866c0 .365-.385.603-.711.44l-3.58-1.79v1.35c0 .623-.476 1.138-1.083 1.2l-.123.006H5.707c-.665 0-1.207-.542-1.207-1.206V8.207C4.5 7.542 5.042 7 5.707 7zm0 .983H5.707c-.122 0-.224.102-.224.224v7.866c0 .121.102.223.224.223h9.296c.122 0 .223-.102.223-.223V8.207c0-.122-.101-.224-.223-.224zm4.513 1.019l-3.307 1.654v2.968l3.307 1.653V9.002z"})})}function Ye(e){var t=C(),n=Object(f.a)(t,2),r=n[0],c=n[1],a=Object(i.useRef)(0),o=D().hasVideoInputDevices,s=Object(i.useCallback)((function(){Date.now()-a.current>500&&(a.current=Date.now(),c())}),[c]);return Object(m.jsx)(b.a,{className:e.className,onClick:s,disabled:!o||e.disabled,startIcon:r?Object(m.jsx)(Ge,{}):Object(m.jsx)(Ke,{}),children:o?r?"Stop Video":"Start Video":"No Video"})}function qe(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(m.jsx)("path",{fill:"#707578",fillRule:"evenodd",d:"M17.657 6.343c3.124 3.124 3.124 8.19 0 11.314-3.124 3.124-8.19 3.124-11.314 0-3.124-3.124-3.124-8.19 0-11.314 3.124-3.124 8.19-3.124 11.314 0zm-10.444.87c-2.643 2.644-2.643 6.93 0 9.574 2.644 2.643 6.93 2.643 9.574 0 2.57-2.57 2.641-6.693.214-9.35l-.214-.224L16.563 7c-2.657-2.427-6.78-2.356-9.35.214zm4.865.484l.02.003.026.005.041.01c.025.007.045.014.063.021l.043.019c.018.009.036.019.053.03.01.005.02.012.03.02.027.019.053.04.077.063l2.773 2.774c.24.24.24.63 0 .87-.213.214-.545.237-.785.071l-.085-.07-1.719-1.72v5.9c0 .34-.275.615-.615.615-.302 0-.553-.218-.605-.505l-.01-.11-.001-5.9-1.718 1.72c-.24.24-.63.24-.87 0-.214-.215-.238-.546-.072-.786l.072-.085 2.769-2.77.015-.014c.02-.018.04-.035.062-.05l.005-.004.008-.006c.027-.018.055-.034.085-.048l.034-.015.059-.02.032-.008c.021-.005.044-.008.068-.011l.038-.003H12.025l.027.002.026.002z"})})}var Je=n(375);function Qe(){var e=M().room,t=Object(i.useState)(),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){if("connected"===e.state){var t=function(){c(Array.from(e.participants.values()).concat(e.localParticipant).find((function(e){return Array.from(e.tracks.values()).find((function(e){return e.trackName.includes("screen")}))})))};return t(),e.on("trackPublished",t),e.on("trackUnpublished",t),e.on("participantDisconnected",t),e.localParticipant.on("trackPublished",t),e.localParticipant.on("trackUnpublished",t),function(){e.off("trackPublished",t),e.off("trackUnpublished",t),e.off("participantDisconnected",t),e.localParticipant.off("trackPublished",t),e.localParticipant.off("trackUnpublished",t)}}}),[e]),r}var Ze=Object(u.a)((function(e){return Object(j.a)({button:{margin:e.spacing(1),"&[disabled]":{color:"#bbb","& svg *":{fill:"#bbb"}}}})}));function Xe(e){var t=Ze(),n=Qe(),i=M().toggleScreenShare,r=Boolean(n),c=navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia,a=e.disabled||r||!c,o="";return r&&(o="Cannot share screen when another user is sharing"),c||(o="Screen sharing is not supported with this browser"),Object(m.jsx)(Je.a,{title:o,placement:"top",PopperProps:{disablePortal:!0},style:{cursor:a?"not-allowed":"pointer"},children:Object(m.jsx)("span",{children:Object(m.jsx)(b.a,{className:t.button,onClick:i,disabled:a,startIcon:Object(m.jsx)(qe,{}),"data-cy-share-screen":!0,children:"Share Screen"})})})}var $e=Object(u.a)((function(e){return Object(j.a)({container:Object(l.a)({backgroundColor:e.palette.background.default,bottom:0,left:0,right:0,height:"".concat(e.footerHeight,"px"),position:"fixed",display:"flex",padding:"0 1.43em",zIndex:10},e.breakpoints.down("sm"),{height:"".concat(e.mobileFooterHeight,"px"),padding:0}),screenShareBanner:{position:"fixed",zIndex:10,bottom:"".concat(e.footerHeight,"px"),left:0,right:0,height:"104px",background:"rgba(0, 0, 0, 0.5)","& h6":{color:"white"},"& button":{background:"white",color:e.brand,border:"2px solid ".concat(e.brand),margin:"0 2em","&:hover":{color:"#600101",border:"2px solid #600101",background:"#FFE9E7"}}},hideMobile:Object(l.a)({display:"initial"},e.breakpoints.down("sm"),{display:"none"})})}));function et(){var e=$e(),t=M(),n=t.isSharingScreen,i=t.toggleScreenShare,r="reconnecting"===He(),c=M().room;return Object(m.jsxs)(m.Fragment,{children:[n&&Object(m.jsxs)(ge.a,{container:!0,justify:"center",alignItems:"center",className:e.screenShareBanner,children:[Object(m.jsx)(xe.a,{variant:"h6",children:"You are sharing your screen"}),Object(m.jsx)(b.a,{onClick:function(){return i()},children:"Stop Sharing"})]}),Object(m.jsx)("footer",{className:e.container,children:Object(m.jsxs)(ge.a,{container:!0,justify:"space-around",alignItems:"center",children:[Object(m.jsx)(Fe.a,{smDown:!0,children:Object(m.jsx)(ge.a,{style:{flex:1},children:Object(m.jsx)(xe.a,{variant:"body1",children:c.name})})}),Object(m.jsx)(ge.a,{item:!0,children:Object(m.jsxs)(ge.a,{container:!0,justify:"center",children:[Object(m.jsx)(Ue,{disabled:r}),Object(m.jsx)(Ye,{disabled:r}),Object(m.jsx)(Fe.a,{smDown:!0,children:!n&&Object(m.jsx)(Xe,{disabled:r})}),Object(m.jsx)(W,{})]})}),Object(m.jsx)(Fe.a,{smDown:!0,children:Object(m.jsx)(ge.a,{style:{flex:1},children:Object(m.jsxs)(ge.a,{container:!0,justify:"flex-end",children:[Object(m.jsx)(ze,{}),Object(m.jsx)(H,{})]})})})]})})]})}var tt=Object(u.a)((function(e){return{container:Object(l.a)({background:"white",paddingLeft:"1em",display:"none",height:"".concat(e.mobileTopBarHeight,"px")},e.breakpoints.down("sm"),{display:"flex"}),endCallButton:{height:"28px",fontSize:"0.85rem",padding:"0 0.6em"},settingsButton:Object(l.a)({},e.breakpoints.down("sm"),{height:"28px",minWidth:"28px",border:"1px solid rgb(136, 140, 142)",padding:0,margin:"0 1em"})}}));function nt(){var e=tt(),t=M().room;return Object(m.jsxs)(ge.a,{container:!0,alignItems:"center",justify:"space-between",className:e.container,children:[Object(m.jsx)(xe.a,{variant:"subtitle1",children:t.name}),Object(m.jsxs)("div",{children:[Object(m.jsx)(H,{className:e.endCallButton}),Object(m.jsx)(ze,{buttonClassName:e.settingsButton})]})]})}function it(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"73",height:"73",viewBox:"0 0 73 73",children:Object(m.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(m.jsx)("circle",{cx:"36.5",cy:"36.5",r:"36.5",fill:"#FFF"}),Object(m.jsx)("path",{fill:"#282A2B",strokeLinejoin:"round",d:"M30.973 23.925c-3.162 3.794-3.162 9.886 0 13.68l.262.301c.266.293.548.564.842.812l.192.154v2.95l-6.71 2.397-.213.082c-2.03.834-3.346 2.793-3.346 4.97v2.766c0 .532.431.963.963.963h27.874c.531 0 .962-.431.962-.963V49.27l-.005-.228-.015-.233c-.187-2.092-1.562-3.883-3.539-4.59l-6.71-2.397v-2.95l.192-.154c.393-.33.762-.702 1.104-1.112 3.162-3.795 3.162-9.887 0-13.681-3.25-3.9-8.603-3.9-11.853 0zm10.374 1.232c2.567 3.08 2.567 8.135 0 11.216-.404.484-.85.894-1.328 1.226-.26.18-.414.476-.414.791v4.111c0 .407.255.77.639.907l7.348 2.625c1.314.47 2.213 1.687 2.278 3.077l.004.183v1.781h-25.95l.002-1.804c0-1.394.843-2.65 2.131-3.18l.172-.065 7.327-2.617c.383-.137.639-.5.639-.907v-4.11c0-.316-.155-.612-.415-.792-.478-.332-.924-.742-1.328-1.226-2.567-3.08-2.567-8.135 0-11.216 2.427-2.912 6.248-2.974 8.735-.186l.16.186z"})]})})}function rt(){var e=M().localTracks.find((function(e){return"audio"===e.kind}));return Object(m.jsx)(pe,{audioTrack:e})}var ct=Object(u.a)((function(e){return{container:{position:"relative",height:0,overflow:"hidden",paddingTop:"".concat(56.25,"%"),background:"black"},innerContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},identityContainer:{position:"absolute",bottom:0,zIndex:1},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.18em 0.3em",margin:0,display:"flex",alignItems:"center"},avatarContainer:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1},e.breakpoints.down("sm"),{"& svg":{transform:"scale(0.7)"}})}}));function at(e){var t=e.identity,n=ct(),i=M().localTracks.find((function(e){return e.name.includes("camera")}));return Object(m.jsxs)("div",{className:n.container,children:[Object(m.jsx)("div",{className:n.innerContainer,children:i?Object(m.jsx)(Te,{track:i,isLocal:!0}):Object(m.jsx)("div",{className:n.avatarContainer,children:Object(m.jsx)(it,{})})}),Object(m.jsx)("div",{className:n.identityContainer,children:Object(m.jsxs)("span",{className:n.identity,children:[Object(m.jsx)(rt,{}),Object(m.jsx)(xe.a,{variant:"body1",color:"inherit",component:"span",children:t})]})})]})}var ot=n(376),st=n(377),lt=[{label:"Low (160 x 90)",value:"low",resolution:{width:160,height:90}},{label:"CIF (352 x 288)",value:"cif",resolution:{width:352,height:288}},{label:"VGA (640 x 480)",value:"vga",resolution:{width:640,height:480}},{label:"WVGA (800 x 480)",value:"wvga",resolution:{width:800,height:480}},{label:"HD 540P (960 x 540)",value:"540p",resolution:{width:960,height:540}},{label:"HD 720P (1280 x 720)",value:"720p",resolution:{width:1280,height:720}},{label:"HD 960P (1280 x 960)",value:"960p",resolution:{width:1280,height:960}},{label:"HD Standard 1080P (1440 x 1080)",value:"standard1080p",resolution:{width:1440,height:1080}},{label:"HD Widescreen 1080P (1920 x 1080)",value:"wide1080p",resolution:{width:1920,height:1080}},{label:"Server Default",value:"default",resolution:void 0}];function dt(e){var t;if("undefined"!==typeof e)return null===(t=lt.find((function(t){return t.value===e})))||void 0===t?void 0:t.resolution}var ut=Object(u.a)((function(e){var t;return{container:(t={width:"600px",minHeight:"400px"},Object(l.a)(t,e.breakpoints.down("xs"),{width:"calc(100vw - 32px)"}),Object(l.a)(t,"& .inputSelect",{width:"calc(100% - 35px)"}),t),button:{float:"right"},paper:Object(l.a)({},e.breakpoints.down("xs"),{margin:"16px"}),formControl:{display:"block",margin:"1.5em 0","&:first-child":{margin:"0 0 1.5em 0"}},label:{width:"133%"}}})),jt=function(e){return"undefined"===typeof e?"default":e},bt=lt.map((function(e){var t=e.label,n=e.value;return Object(m.jsx)(Ce.a,{value:n,children:t},n)}));function ht(e){var t=e.open,n=e.onClose,r=ut(),c=de(),a=c.settings,o=c.dispatchSetting,s="disconnected"!==He(),l=Object(i.useCallback)((function(e){o({name:e.target.name,value:e.target.value})}),[o]),d=Object(i.useCallback)((function(e){/[^\d]/.test(e.target.value)||l(e)}),[l]);return Object(m.jsxs)(U.a,{open:t,onClose:n,classes:{paper:r.paper},children:[Object(m.jsx)(q.a,{children:"Connection Settings"}),Object(m.jsx)(J.a,{}),Object(m.jsx)(G.a,{className:r.container,children:Object(m.jsxs)(ge.a,{container:!0,spacing:2,children:[Object(m.jsx)(ge.a,{item:!0,xs:12,children:Object(m.jsx)(xe.a,{hidden:!s,variant:"body2",children:"These settings cannot be changed when connected to a room."})}),Object(m.jsxs)(ge.a,{item:!0,sm:6,xs:12,children:[Object(m.jsxs)(we.a,{className:r.formControl,children:[Object(m.jsx)(ot.a,{id:te.dominantSpeakerPriority,children:"Dominant Speaker Priority:"}),Object(m.jsxs)(ke.a,{fullWidth:!0,disabled:s,name:te.dominantSpeakerPriority,label:te.dominantSpeakerPriority,value:jt(a.dominantSpeakerPriority),onChange:l,children:[Object(m.jsx)(Ce.a,{value:"low",children:"Low"}),Object(m.jsx)(Ce.a,{value:"standard",children:"Standard"}),Object(m.jsx)(Ce.a,{value:"high",children:"High"}),Object(m.jsx)(Ce.a,{value:"default",children:"Server Default"})]})]}),Object(m.jsxs)(we.a,{className:r.formControl,children:[Object(m.jsx)(ot.a,{id:te.trackSwitchOffMode,children:"Track Switch Off Mode:"}),Object(m.jsxs)(ke.a,{fullWidth:!0,disabled:s,name:te.trackSwitchOffMode,label:te.trackSwitchOffMode,value:jt(a.trackSwitchOffMode),onChange:l,children:[Object(m.jsx)(Ce.a,{value:"predicted",children:"Predicted"}),Object(m.jsx)(Ce.a,{value:"detected",children:"Detected"}),Object(m.jsx)(Ce.a,{value:"disabled",children:"Disabled"}),Object(m.jsx)(Ce.a,{value:"default",children:"Server Default"})]})]}),Object(m.jsxs)(we.a,{className:r.formControl,children:[Object(m.jsx)(ot.a,{id:te.bandwidthProfileMode,children:"Mode:"}),Object(m.jsxs)(ke.a,{fullWidth:!0,disabled:s,name:te.bandwidthProfileMode,label:te.bandwidthProfileMode,value:jt(a.bandwidthProfileMode),onChange:l,children:[Object(m.jsx)(Ce.a,{value:"grid",children:"Grid"}),Object(m.jsx)(Ce.a,{value:"collaboration",children:"Collaboration"}),Object(m.jsx)(Ce.a,{value:"presentation",children:"Presentation"}),Object(m.jsx)(Ce.a,{value:"default",children:"Server Default"})]})]}),Object(m.jsx)(we.a,{className:r.formControl,children:Object(m.jsx)(st.a,{disabled:s,fullWidth:!0,id:te.maxTracks,label:"Max Tracks",placeholder:"Leave blank for no limit",name:te.maxTracks,value:jt(a.maxTracks),onChange:d})}),Object(m.jsx)(we.a,{className:r.formControl,children:Object(m.jsx)(st.a,{disabled:s,fullWidth:!0,id:te.maxAudioBitrate,label:"Max Audio Bitrate",placeholder:"Leave blank for no limit",name:te.maxAudioBitrate,value:jt(a.maxAudioBitrate),onChange:d})})]}),Object(m.jsxs)(ge.a,{item:!0,sm:6,xs:12,children:[Object(m.jsxs)(we.a,{fullWidth:!0,className:r.formControl,children:[Object(m.jsx)(ot.a,{id:te.renderDimensionLow,className:r.label,children:"Render Dimension (Low Priority):"}),Object(m.jsx)(ke.a,{fullWidth:!0,disabled:s,name:te.renderDimensionLow,label:te.renderDimensionLow,value:jt(a.renderDimensionLow),onChange:l,children:bt})]}),Object(m.jsxs)(we.a,{fullWidth:!0,className:r.formControl,children:[Object(m.jsx)(ot.a,{id:te.renderDimensionStandard,className:r.label,children:"Render Dimension (Standard Priority):"}),Object(m.jsx)(ke.a,{fullWidth:!0,disabled:s,name:te.renderDimensionStandard,label:te.renderDimensionStandard,value:jt(a.renderDimensionStandard),onChange:l,children:bt})]}),Object(m.jsxs)(we.a,{fullWidth:!0,className:r.formControl,children:[Object(m.jsx)(ot.a,{id:te.renderDimensionHigh,className:r.label,children:"Render Dimension (High Priority):"}),Object(m.jsx)(ke.a,{fullWidth:!0,disabled:s,name:te.renderDimensionHigh,label:te.renderDimensionHigh,value:jt(a.renderDimensionHigh),onChange:l,children:bt})]})]})]})}),Object(m.jsx)(J.a,{}),Object(m.jsx)(K.a,{children:Object(m.jsx)(b.a,{className:r.button,color:"primary",variant:"contained",onClick:n,children:"Done"})})]})}function ft(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(m.jsx)("g",{fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round",children:Object(m.jsx)("g",{fill:"#707578",children:Object(m.jsx)("path",{d:"M10 .833c.276 0 .5.224.5.5l-.001 1.775.16.042c.423.113.775.226 1.072.35l.121.054 1.273-1.272c.173-.173.442-.192.637-.057l.07.057 1.886 1.886c.195.196.195.512 0 .708l-1.273 1.27.055.123c.125.297.238.65.351 1.073l.041.158h1.775c.245 0 .45.177.492.41l.008.09v2c0 .276-.224.5-.5.5H14.89l-.03.118c-.115.431-.231.798-.358 1.103l-.058.131 1.273 1.273c.173.174.192.443.057.638l-.057.07-1.886 1.885c-.195.195-.511.195-.707 0l-1.273-1.272-.12.053c-.296.125-.648.238-1.071.352l-.162.041.001 1.775c0 .245-.177.45-.41.492l-.09.008H8c-.276 0-.5-.224-.5-.5l-.001-1.775-.161-.042c-.425-.114-.776-.227-1.072-.351l-.12-.054-1.271 1.272c-.174.174-.443.193-.638.058l-.07-.057-1.885-1.886c-.195-.195-.196-.512 0-.707l1.272-1.273-.053-.12c-.125-.296-.238-.648-.352-1.071l-.042-.161H1.333c-.245 0-.45-.177-.492-.41L.833 10V8c0-.276.224-.5.5-.5h1.774l.042-.16c.114-.424.227-.776.352-1.072l.052-.121-1.271-1.271c-.174-.174-.193-.443-.058-.638l.058-.07 1.886-1.886c.195-.195.512-.195.707 0l1.272 1.272.121-.053c.297-.125.65-.238 1.073-.351l.158-.042.001-1.775c0-.245.177-.45.41-.492L8 .833zm-.501 1h-1L8.5 3.499c0 .202-.121.38-.302.459l-.08.027c-.857.206-1.458.397-1.805.608-.197.12-.45.09-.614-.073L4.521 3.342 3.342 4.521 4.52 5.699c.14.14.182.347.116.527l-.043.087c-.211.347-.402.947-.61 1.805-.054.224-.255.382-.486.382H1.833v1h1.664c.202 0 .381.121.46.301l.026.081c.208.858.399 1.458.61 1.805.12.197.09.45-.073.614l-1.178 1.177 1.178 1.179 1.178-1.178c.14-.14.347-.182.528-.115l.087.042c.277.17.714.325 1.32.487l.485.124c.224.054.382.255.382.486l-.001 1.663h1l.001-1.663c0-.202.121-.381.301-.46l.081-.026c.858-.208 1.458-.399 1.804-.61.197-.12.45-.09.614.073l1.178 1.177 1.179-1.179-1.177-1.177c-.14-.14-.182-.347-.116-.527l.043-.087c.189-.31.37-.852.554-1.577l.056-.23c.055-.223.256-.38.486-.38h1.663v-1h-1.664c-.202 0-.381-.121-.46-.302l-.026-.08c-.206-.854-.398-1.458-.61-1.806-.12-.197-.09-.45.074-.614l1.176-1.177-1.178-1.178L12.3 4.52c-.14.14-.346.182-.526.116l-.088-.043c-.277-.169-.717-.325-1.32-.486l-.483-.122C9.658 3.93 9.5 3.73 9.5 3.499l-.001-1.666zm1.976 4.692c1.367 1.367 1.367 3.583 0 4.95s-3.583 1.367-4.95 0-1.367-3.583 0-4.95 3.583-1.367 4.95 0zm-4.243.707c-.976.977-.976 2.56 0 3.536.977.976 2.56.976 3.536 0 .934-.934.974-2.423.122-3.405l-.122-.13-.13-.123c-.983-.852-2.472-.812-3.406.122z",transform:"translate(-636 -585) translate(276 301) translate(360 284) translate(3 3)"})})})})}var mt=Object(u.a)({settingsButton:{margin:"1.8em 0 0"}});function vt(e){var t=e.mobileButtonClass,n=mt(),r=de().roomType,c=Object(Me.a)((function(e){return e.breakpoints.down("sm")})),a=Object(i.useState)(!1),o=Object(f.a)(a,2),s=o[0],l=o[1],d=Object(i.useState)(!1),u=Object(f.a)(d,2),j=u[0],h=u[1],v=Object(i.useState)(!1),O=Object(f.a)(v,2),p=O[0],x=O[1],g=Object(i.useState)(!1),w=Object(f.a)(g,2),k=w[0],C=w[1],S=Object(i.useRef)(null);return Object(m.jsxs)(m.Fragment,{children:[c?Object(m.jsx)(b.a,{ref:S,onClick:function(){return l(!0)},startIcon:Object(m.jsx)(_e.a,{}),className:t,children:"More"}):Object(m.jsx)(b.a,{ref:S,onClick:function(){return l(!0)},startIcon:Object(m.jsx)(ft,{}),className:n.settingsButton,children:"Settings"}),Object(m.jsxs)(Ie.a,{open:s,onClose:function(){return l((function(e){return!e}))},anchorEl:S.current,getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:c?"left":"right"},transformOrigin:{vertical:c?-55:-45,horizontal:"center"},children:[Object(m.jsx)(Ce.a,{onClick:function(){return h(!0)},children:Object(m.jsx)(xe.a,{variant:"body1",children:"About"})}),Object(m.jsx)(Ce.a,{onClick:function(){return x(!0)},children:Object(m.jsx)(xe.a,{variant:"body1",children:"Audio and Video Settings"})}),"peer-to-peer"!==r&&"go"!==r&&Object(m.jsx)(Ce.a,{onClick:function(){return C(!0)},children:Object(m.jsx)(xe.a,{variant:"body1",children:"Connection Settings"})})]}),Object(m.jsx)(ue,{open:j,onClose:function(){h(!1),l(!1)}}),Object(m.jsx)(Le,{open:p,onClose:function(){x(!1),l(!1)}}),Object(m.jsx)(ht,{open:k,onClose:function(){C(!1),l(!1)}})]})}var Ot=Object(u.a)((function(e){return{gutterBottom:{marginBottom:"1em"},marginTop:{marginTop:"1em"},deviceButton:{width:"100%",border:"2px solid #aaa",margin:"1em 0"},localPreviewContainer:Object(l.a)({paddingRight:"2em"},e.breakpoints.down("sm"),{padding:"0 2.5em"}),joinButtons:Object(l.a)({display:"flex",justifyContent:"space-between"},e.breakpoints.down("sm"),{flexDirection:"column-reverse",width:"100%","& button":{margin:"0.5em 0"}}),mobileButtonBar:Object(l.a)({},e.breakpoints.down("sm"),{display:"flex",justifyContent:"space-between",margin:"1.5em 0 1em"}),mobileButton:{padding:"0.8em 0",margin:0}}}));function pt(e){var t=e.name,n=e.roomName,i=e.setStep,r=Ot(),c=de(),a=c.getToken,o=c.isFetching,s=M(),l=s.connect,d=s.isAcquiringLocalTracks,u=s.isConnecting,j=o||d||u;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(xe.a,{variant:"h5",className:r.gutterBottom,children:["Join ",n]}),Object(m.jsxs)(ge.a,{container:!0,justify:"center",children:[Object(m.jsxs)(ge.a,{item:!0,md:7,sm:12,xs:12,children:[Object(m.jsx)("div",{className:r.localPreviewContainer,children:Object(m.jsx)(at,{identity:t})}),Object(m.jsxs)("div",{className:r.mobileButtonBar,children:[Object(m.jsxs)(Fe.a,{mdUp:!0,children:[Object(m.jsx)(Ue,{className:r.mobileButton,disabled:j}),Object(m.jsx)(Ye,{className:r.mobileButton,disabled:j})]}),Object(m.jsx)(vt,{mobileButtonClass:r.mobileButton})]})]}),Object(m.jsx)(ge.a,{item:!0,md:5,sm:12,xs:12,children:Object(m.jsxs)(ge.a,{container:!0,direction:"column",justify:"space-between",style:{height:"100%"},children:[Object(m.jsx)("div",{children:Object(m.jsxs)(Fe.a,{smDown:!0,children:[Object(m.jsx)(Ue,{className:r.deviceButton,disabled:j}),Object(m.jsx)(Ye,{className:r.deviceButton,disabled:j})]})}),Object(m.jsxs)("div",{className:r.joinButtons,children:[Object(m.jsx)(b.a,{variant:"outlined",color:"primary",onClick:function(){return i(qt.roomNameStep)},children:"Cancel"}),Object(m.jsx)(b.a,{variant:"contained",color:"primary","data-cy-join-now":!0,onClick:function(){a(t,n).then((function(e){return l(e)}))},disabled:j,children:"Join Now"})]})]})})]})]})}function xt(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"96",height:"96",viewBox:"0 0 96 96",children:Object(m.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(m.jsx)("path",{fill:"#FFF",d:"M43.86 0h8.28c11.661 0 18.564 1.74 24.675 5.01 6.112 3.267 10.908 8.063 14.175 14.175C94.26 25.295 96 32.197 96 43.86v8.28c0 11.661-1.74 18.564-5.01 24.675-3.267 6.112-8.063 10.908-14.175 14.175C70.704 94.26 63.801 96 52.14 96h-8.28c-11.661 0-18.564-1.74-24.675-5.01-6.112-3.267-10.908-8.063-14.175-14.175C1.74 70.705 0 63.803 0 52.14v-8.28c0-11.661 1.74-18.564 5.01-24.675C8.277 13.073 13.073 8.277 19.185 5.01 25.295 1.74 32.197 0 43.86 0z"}),Object(m.jsx)("path",{fill:"#F22F46",d:"M53.25 63h-25.5C25.679 63 24 61.321 24 59.25v-22.5c0-2.071 1.679-3.75 3.75-3.75h25.5c2.071 0 3.75 1.679 3.75 3.75v5.82l9.57-4.785c1.164-.583 2.546-.521 3.653.164 1.107.685 1.78 1.894 1.777 3.196V54.87c.008 1.3-.66 2.512-1.766 3.198-1.105.686-2.487.747-3.65.162L57 53.49v5.76C57 61.321 55.32 63 53.25 63zm-25.5-27c-.414 0-.75.336-.75.75v22.5c0 .414.336.75.75.75h25.5c.414 0 .75-.336.75-.75v-8.175c-.001-.518.266-1 .705-1.275.44-.275.99-.303 1.455-.075L67.92 55.5c.224.123.496.123.72 0 .22-.141.356-.383.36-.645v-13.71c-.004-.262-.14-.504-.36-.645-.224-.123-.496-.123-.72 0l-11.745 5.865c-.47.236-1.028.21-1.473-.069-.445-.28-.711-.77-.702-1.296v-8.25c0-.414-.336-.75-.75-.75h-25.5z"})]})})}var gt=n(361),wt=(n(378),n(312));n(168),Object(wt.a)({red:{color:"white",backgroundColor:"#F22F46"}});var kt=Object(u.a)({userContainer:{position:"absolute",top:0,right:0,margin:"1em",display:"flex",alignItems:"center"},userButton:{color:"white"},logoutLink:{color:"white",cursor:"pointer",padding:"10px 20px"}}),Ct=function(){var e=kt(),t=de(),n=(t.user,t.signOut),r=M().localTracks,c=Object(i.useState)(!1),a=Object(f.a)(c,2),o=(a[0],a[1],Object(i.useRef)(null),Object(i.useCallback)((function(){r.forEach((function(e){return e.stop()})),null===n||void 0===n||n()}),[r,n]));return Object(m.jsx)("div",{className:e.userContainer,children:Object(m.jsx)(gt.a,{onClick:o,className:e.logoutLink,children:"Logout"})})},St=Object(u.a)((function(e){return{background:{display:"flex",alignItems:"center",justifyContent:"center",background:"rgb(40, 42, 43)",height:"100%"},container:{position:"relative",flex:"1"},innerContainer:Object(l.a)({display:"flex",width:"888px",height:"379px",borderRadius:"8px",boxShadow:"0px 2px 4px 0px rgba(40, 42, 43, 0.3)",overflow:"hidden",position:"relative",margin:"auto"},e.breakpoints.down("sm"),{display:"block",height:"auto",width:"calc(100% - 40px)",margin:"auto",maxWidth:"400px"}),swooshContainer:Object(l.a)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='296' height='378' viewBox='0 0 296 378'%3E%3Cdefs%3E%3ClinearGradient id='utbttnlrpc' x1='78.976%25' x2='63.882%25' y1='60.873%25' y2='45.554%25'%3E%3Cstop offset='0%25' stop-opacity='0'/%3E%3Cstop offset='100%25'/%3E%3C/linearGradient%3E%3ClinearGradient id='aim8r3oczd' x1='78.976%25' x2='63.882%25' y1='56.106%25' y2='47.503%25'%3E%3Cstop offset='0%25' stop-opacity='0'/%3E%3Cstop offset='100%25'/%3E%3C/linearGradient%3E%3Cpath id='5tk4i6f80a' d='M0 0H296V378H0z'/%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cmask id='m1ihwluuxb' fill='%23fff'%3E%3Cuse xlink:href='%235tk4i6f80a'/%3E%3C/mask%3E%3Cuse fill='%23DE5858' xlink:href='%235tk4i6f80a'/%3E%3Cg mask='url(%23m1ihwluuxb)'%3E%3Cg%3E%3Cpath fill='url(%23utbttnlrpc)' d='M0 286.83c87.695-83.937 175.802-132.682 264.323-146.233 132.78-20.328 183.24 4.255 225.143-23.414 73.409-48.471 93.039-15.154 148.326-20.892 44.84-4.654 98.48-77.401 135.81-91.717C795.596-3.86 821.469.801 851.22 18.56L891 476.5H0V286.83z' opacity='.06' transform='translate(-457 -22.5)'/%3E%3Cpath fill='url(%23aim8r3oczd)' d='M137 604.5c63.759-109.686 155.8-165.124 276.126-166.315 180.488-1.786 157.888-146.686 387.11-146.33 229.223.356 170.665-151.786 341.36-166.888 113.797-10.068 180.265 10.685 199.404 62.26V604.5H137z' opacity='.08' transform='translate(-457 -22.5)'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A\");",backgroundSize:"cover",width:"296px"},e.breakpoints.down("sm"),{width:"100%",height:"100px",backgroundPositionY:"140px"}),logoContainer:Object(l.a)({position:"absolute",width:"210px",textAlign:"center"},e.breakpoints.down("sm"),{display:"flex",alignItems:"center",width:"90%",textAlign:"initial","& svg":{height:"64px"}}),twilioLogo:{position:"absolute",top:0,left:0,margin:"20px"},content:Object(l.a)({background:"white",width:"100%",padding:"4em",flex:1},e.breakpoints.down("sm"),{padding:"2em"}),title:Object(l.a)({color:"white",margin:"1em 0 0"},e.breakpoints.down("sm"),{margin:0,fontSize:"1.1rem"}),subContentContainer:{position:"absolute",marginTop:"1em",width:"100%"}}})),yt=function(e){var t=St(),n=de().user,i=Object(ie.h)();return Object(m.jsxs)("div",{className:t.background,children:[n&&"/login"!==i.pathname&&Object(m.jsx)(Ct,{}),Object(m.jsxs)("div",{className:t.container,children:[Object(m.jsxs)("div",{className:t.innerContainer,children:[Object(m.jsx)("div",{className:t.swooshContainer,children:Object(m.jsxs)("div",{className:t.logoContainer,children:[Object(m.jsx)(xt,{}),Object(m.jsx)(xe.a,{variant:"h6",className:t.title,children:"EduAll"})]})}),Object(m.jsx)("div",{className:t.content,children:e.children})]}),e.subContent&&Object(m.jsx)("div",{className:t.subContentContainer,children:e.subContent})]})]})},Et=n(169),Tt=n.n(Et);function Pt(){return Object(m.jsx)("svg",{width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(m.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(m.jsx)("g",{transform:"translate(-299.000000, -723.000000)",fill:"#D61F1F",children:Object(m.jsx)("g",{transform:"translate(276.000000, 704.000000)",children:Object(m.jsx)("g",{transform:"translate(23.000000, 19.000000)",children:Object(m.jsx)("path",{d:"M8.03935839,0.763849674 L13.2361503,5.96064161 C13.8101721,6.5346634 13.8101721,7.4653366 13.2361503,8.03935839 L8.03935839,13.2361503 C7.4653366,13.8101721 6.5346634,13.8101721 5.96064161,13.2361503 L0.763849674,8.03935839 C0.189827887,7.4653366 0.189827887,6.5346634 0.763849674,5.96064161 L5.96064161,0.763849674 C6.5346634,0.189827887 7.4653366,0.189827887 8.03935839,0.763849674 Z M7,8.66666667 C6.53976271,8.66666667 6.16666667,9.03976271 6.16666667,9.5 C6.16666667,9.96023729 6.53976271,10.3333333 7,10.3333333 C7.46023729,10.3333333 7.83333333,9.96023729 7.83333333,9.5 C7.83333333,9.03976271 7.46023729,8.66666667 7,8.66666667 Z M7.00842529,4.5 L6.99145559,4.5 C6.48802096,4.5 6.09771771,4.99363437 6.17690967,5.53663218 L6.53327351,7.40140326 C6.56721292,7.64822044 6.76519283,7.83333333 6.99711216,7.83333333 L7.00276873,7.83333333 C7.23468805,7.83333333 7.43266796,7.64822044 7.46660737,7.40140326 L7.82297121,5.53663218 C7.90216317,4.99363437 7.51751649,4.50617043 7.00842529,4.5 Z",id:"Error"})})})})})})}var Nt=n(362),At=n(370);function Lt(){return Object(m.jsx)("svg",{width:"16px",height:"14px",viewBox:"0 0 16 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(m.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(m.jsx)("g",{transform:"translate(-273.000000, -162.000000)",fill:"#E46216",children:Object(m.jsx)("g",{transform:"translate(251.000000, 143.000000)",children:Object(m.jsx)("g",{transform:"translate(22.000000, 19.000000)",children:Object(m.jsx)("path",{d:"M6.68405227,0.743750848 C7.26590697,-0.247916949 8.73410873,-0.247916949 9.31596344,0.743750848 L9.31596344,0.743750848 L15.7980583,11.7915293 C16.3754418,12.775573 15.6458879,14 14.4821027,14 L14.4821027,14 L1.5178827,14 C0.354135396,14 -0.375441293,12.775573 0.201934693,11.7915293 L0.201934693,11.7915293 Z M8,10 C7.44771525,10 7,10.4477153 7,11 C7,11.5522847 7.44771525,12 8,12 C8.55228475,12 9,11.5522847 9,11 C9,10.4477153 8.55228475,10 8,10 Z M8.01011035,5 L7.98974671,5 L7.87816923,5.00681158 C7.32928042,5.07427655 6.92320065,5.63308608 7.01229161,6.24395862 L7.01229161,6.24395862 L7.43992821,8.48168391 L7.46058982,8.57746523 C7.53403676,8.82448556 7.74990819,9 8.00332247,9 L8.00332247,9 L8.09436762,8.9919759 C8.33199007,8.94972242 8.5237268,8.74495557 8.55992884,8.48168391 L8.55992884,8.48168391 L8.98756545,6.24395862 L8.99896034,6.12268979 C9.02431547,5.52149772 8.58283795,5.00694173 8.01011035,5 L8.01011035,5 Z"})})})})})})}var Dt=Object(u.a)((function(e){return{container:Object(l.a)({display:"flex",alignItems:"baseline",justifyContent:"space-between",width:"400px",minHeight:"50px",background:"white",padding:"1em",borderRadius:"3px",boxShadow:"0 12px 24px 4px rgba(40,42,43,0.2)"},e.breakpoints.down("sm"),{width:"100%"}),contentContainer:{display:"flex"},iconContainer:{display:"flex",padding:"0 1.3em 0 0.3em",transform:"translateY(4px)"},headline:{fontWeight:"bold"},error:{borderLeft:"4px solid #D61F1F"},warning:{borderLeft:"4px solid #E46216"}}}));function Rt(e){var t,n=e.headline,i=e.message,r=e.variant,c=e.open,a=e.handleClose,o=Dt();return Object(m.jsx)(At.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:function(e,t){"clickaway"!==t&&(null===a||void 0===a||a())},children:Object(m.jsxs)("div",{className:Object(h.a)(o.container,(t={},Object(l.a)(t,o.error,"error"===r),Object(l.a)(t,o.warning,"warning"===r),t)),children:[Object(m.jsxs)("div",{className:o.contentContainer,children:[Object(m.jsxs)("div",{className:o.iconContainer,children:["warning"===r&&Object(m.jsx)(Lt,{}),"error"===r&&Object(m.jsx)(Pt,{})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)(xe.a,{variant:"body1",className:o.headline,component:"span",children:n}),Object(m.jsxs)(xe.a,{variant:"body1",component:"span",children:[" ",i]})]})]}),Object(m.jsx)("div",{children:a&&Object(m.jsx)(Nt.a,{size:"small","aria-label":"close",color:"inherit",onClick:a,children:Object(m.jsx)(Tt.a,{fontSize:"small"})})})]})})}function It(e){var t=e.error,n=D(),r=n.hasAudioInputDevices,c=n.hasVideoInputDevices,a=M().isAcquiringLocalTracks,o=Object(i.useState)(!1),s=Object(f.a)(o,2),l=s[0],d=s[1],u=!l&&!a&&(Boolean(t)||!r||!c),j=function(e,t,n){var i="",r="";switch(!0){case"NotAllowedError"===(null===n||void 0===n?void 0:n.name):i="Unable to Access Media:",r="Permission denied by system"===n.message?"The operating system has blocked the browser from accessing the microphone or camera. Please check your operating system settings.":"The user has denied permission to use audio and video. Please grant permission to the browser to access the microphone and camera.";break;case"NotFoundError"===(null===n||void 0===n?void 0:n.name):i="Cannot Find Microphone or Camera:",r="The browser cannot access the microphone or camera. Please make sure all input devices are connected and enabled.";break;case Boolean(n):i="Error Acquiring Media:",r="".concat(n.name," ").concat(n.message);break;case!e&&!t:i="No Camera or Microphone Detected:",r="Other participants in the room will be unable to see and hear you.";break;case!t:i="No Camera Detected:",r="Other participants in the room will be unable to see you.";break;case!e:i="No Microphone Detected:",r="Other participants in the room will be unable to hear you."}return{headline:i,message:r}}(r,c,t),b=j.headline,h=j.message;return Object(m.jsx)(Rt,{open:u,handleClose:function(){return d(!0)},headline:b,message:h,variant:"warning"})}var Bt=n(86);function _t(e,t,n){return"undefined"===typeof e?Vt.Green:e>=n?Vt.Red:e>=t?Vt.Yellow:Vt.Green}var Mt=2*Math.PI*9,zt=Object(u.a)((function(){return{svg:{transform:"rotate(-90deg)",marginRight:"0.6em",fill:"none"},innerCircle:{stroke:"rgb(200, 204, 207)"},circle:{stroke:"#027AC5",strokeDasharray:Mt,strokeDashoffset:"0px",animation:"".concat(Wt/1e3+1,"s $progress linear")},"@keyframes progress":{"0%":{strokeDashoffset:"".concat(Mt,"px")},"100%":{strokeDashoffset:"0px"}}}}));function Ht(){var e=zt();return Object(m.jsxs)("svg",{viewBox:"0 0 ".concat(24," ").concat(24),width:24,height:24,strokeWidth:"".concat(3,"px"),xmlns:"http://www.w3.org/2000/svg",className:e.svg,children:[Object(m.jsx)("circle",{cx:12,cy:12,r:9,className:e.innerCircle}),Object(m.jsx)("circle",{cx:12,cy:12,r:9,className:e.circle})]})}function Ft(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28",children:Object(m.jsx)("path",{fill:"#00994A",d:"M14 4.667c5.155 0 9.333 4.178 9.333 9.333S19.155 23.333 14 23.333 4.667 19.155 4.667 14 8.845 4.667 14 4.667zm3.496 5.833c-.31 0-.608.123-.827.343l-3.834 3.843-1.504-1.514c-.22-.22-.517-.342-.827-.342-.31 0-.608.123-.828.342-.22.22-.343.517-.343.827 0 .31.124.608.343.827l2.331 2.33c.108.109.237.195.38.254.141.06.294.09.448.09.153 0 .306-.03.448-.09.142-.059.27-.145.379-.255l4.662-4.659c.22-.219.343-.516.343-.826 0-.31-.124-.608-.343-.827-.22-.22-.517-.343-.828-.343z",transform:"translate(-588 -698) translate(588 698)"})})}var Vt,Wt=1e4;!function(e){e[e.Red=0]="Red",e[e.Yellow=1]="Yellow",e[e.Green=2]="Green"}(Vt||(Vt={}));var Ut=Object(u.a)({iconContainer:{display:"flex",alignItems:"center",marginRight:"0.4em"},result:{color:"white"}});function Kt(e){var t=e.children,n=e.icon,i=Ut();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:i.iconContainer,children:n}),Object(m.jsx)(xe.a,{variant:"subtitle2",className:i.result,children:t})]})}function Gt(e){var t=e.networkCondition;return e.error?Object(m.jsx)(Kt,{icon:Object(m.jsx)(Pt,{}),children:"There was a problem connecting to the network"}):t===Vt.Red?Object(m.jsx)(Kt,{icon:Object(m.jsx)(Pt,{}),children:"Poor network conditions. You may experience poor call quality and reliability."}):t===Vt.Yellow?Object(m.jsx)(Kt,{icon:Object(m.jsx)(Lt,{}),children:"Poor network conditions. You may experience degraded video performance."}):t===Vt.Green?Object(m.jsx)(Kt,{icon:Object(m.jsx)(Ft,{}),children:"Your network connection is stable"}):null}function Yt(){var e=Ut(),t=function(){var e=de().getToken,t=Object(i.useState)(),n=Object(f.a)(t,2),r=n[0],c=n[1],a=Object(i.useState)(),o=Object(f.a)(a,2),s=o[0],l=o[1],d=Object(i.useState)(!1),u=Object(f.a)(d,2),j=u[0],b=u[1];return Object(i.useEffect)((function(){if(!j&&!r){var t="preflight-network-test-"+Object(Bt.a)();b(!0);var n="participant-"+Object(Bt.a)(),i="participant-"+Object(Bt.a)();Promise.all([e(n,t),e(i,t)]).then((function(e){c(e),b(!1)})).catch((function(e){return l(e)}))}}),[e,j,r]),{tokens:r,tokenError:s}}(),n=t.tokens,r=t.tokenError,c=function(e,t){var n=M().isConnecting,r=Object(i.useState)(),c=Object(f.a)(r,2),a=c[0],o=c[1],s=Object(i.useState)(),l=Object(f.a)(s,2),d=l[0],u=l[1],j=Object(i.useState)(!1),b=Object(f.a)(j,2),h=b[0],m=b[1],v=Object(i.useRef)();return Object(i.useEffect)((function(){var e,t,i;n&&(null===(e=v.current)||void 0===e||e.stop(),null===(t=v.current)||void 0===t||t.removeAllListeners("completed"),null===(i=v.current)||void 0===i||i.removeAllListeners("failed"))}),[n]),Object(i.useEffect)((function(){return function(){var e,t,n;null===(e=v.current)||void 0===e||e.stop(),null===(t=v.current)||void 0===t||t.removeAllListeners("completed"),null===(n=v.current)||void 0===n||n.removeAllListeners("failed")}}),[]),Object(i.useEffect)((function(){!e||!t||a||d||h||(m(!0),v.current=L.a.testPreflight(e,t,{duration:Wt}),v.current.on("completed",(function(e){o(e),m(!1),console.log("Preflight network test completed. See test report below:"),console.log(e)})).on("failed",(function(e){u(e),m(!1),console.log("Preflight network test failed. See error below:"),console.log(e)})))}),[e,t,a,d,h]),{testReport:a,testFailure:d,isTestRunning:h}}(null===n||void 0===n?void 0:n[0],null===n||void 0===n?void 0:n[1]),a=c.testFailure,o=c.testReport,s=function(e){var t;if(e){var n=null===(t=e.stats.rtt)||void 0===t?void 0:t.average,i=e.stats.jitter.average,r=e.stats.packetLoss.average;return Math.min(_t(n,200,400),_t(i,30,100),_t(r,3,7))}}(o);return Object(m.jsx)(ge.a,{container:!0,justify:"center",alignItems:"center",style:{height:"55px",paddingBottom:"1.5em"},children:a||o?Object(m.jsx)(Gt,{networkCondition:s,error:r||a}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ht,{}),Object(m.jsx)(xe.a,{variant:"subtitle2",className:e.result,children:"Checking your network connection"})]})})}var qt,Jt=Object(u.a)((function(e){return{gutterBottom:{marginBottom:"1em"},inputContainer:Object(l.a)({display:"flex",justifyContent:"space-between",margin:"1.5em 0 3.5em","& div:not(:last-child)":{marginRight:"1em"}},e.breakpoints.down("sm"),{margin:"1.5em 0 2em"}),textFieldContainer:{width:"100%"},continueButton:Object(l.a)({},e.breakpoints.down("sm"),{width:"100%"})}}));function Qt(e){var t=e.name,n=e.roomName,i=e.setName,r=e.setRoomName,c=e.handleSubmit,a=Jt(),o=de().user,s=!window.location.search.includes("customIdentity=true")&&(null===o||void 0===o?void 0:o.displayName);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(xe.a,{variant:"h5",className:a.gutterBottom,children:"Join a Room"}),Object(m.jsx)(xe.a,{variant:"body1",children:s?"Enter the name of a room you'd like to join.":"Enter your name and the name of a room you'd like to join"}),Object(m.jsxs)("form",{onSubmit:c,children:[Object(m.jsxs)("div",{className:a.inputContainer,children:[!s&&Object(m.jsxs)("div",{className:a.textFieldContainer,children:[Object(m.jsx)(ot.a,{shrink:!0,htmlFor:"input-user-name",children:"Your Name"}),Object(m.jsx)(st.a,{id:"input-user-name",variant:"outlined",fullWidth:!0,size:"small",value:t,onChange:function(e){i(e.target.value)}})]}),Object(m.jsxs)("div",{className:a.textFieldContainer,children:[Object(m.jsx)(ot.a,{shrink:!0,htmlFor:"input-room-name",children:"Room Name"}),Object(m.jsx)(st.a,{autoCapitalize:"false",id:"input-room-name",variant:"outlined",fullWidth:!0,size:"small",value:n,onChange:function(e){r(e.target.value)}})]})]}),Object(m.jsx)(ge.a,{container:!0,justify:"flex-end",children:Object(m.jsx)(b.a,{variant:"contained",type:"submit",color:"primary",disabled:!t||!n,className:a.continueButton,children:"Continue"})})]})]})}function Zt(){var e=de().user,t=M().getAudioAndVideoTracks,n=Object(ie.i)().URLRoomName,r=Object(i.useState)(qt.roomNameStep),c=Object(f.a)(r,2),a=c[0],o=c[1],s=Object(i.useState)((null===e||void 0===e?void 0:e.displayName)||""),l=Object(f.a)(s,2),d=l[0],u=l[1],j=Object(i.useState)(""),b=Object(f.a)(j,2),h=b[0],v=b[1],O=Object(i.useState)(),p=Object(f.a)(O,2),x=p[0],g=p[1];Object(i.useEffect)((function(){n&&(v(n),(null===e||void 0===e?void 0:e.displayName)&&o(qt.deviceSelectionStep))}),[e,n]),Object(i.useEffect)((function(){a!==qt.deviceSelectionStep||x||t().catch((function(e){console.log("Error acquiring local media:"),console.dir(e),g(e)}))}),[t,a,x]);var w=Object(m.jsxs)(m.Fragment,{children:[L.a.testPreflight&&Object(m.jsx)(Yt,{}),Object(m.jsx)(It,{error:x})]});return Object(m.jsxs)(yt,{subContent:a===qt.deviceSelectionStep&&w,children:[a===qt.roomNameStep&&Object(m.jsx)(Qt,{name:d,roomName:h,setName:u,setRoomName:v,handleSubmit:function(e){e.preventDefault(),window.location.origin.includes("twil.io")||window.history.replaceState(null,"",window.encodeURI("/room/".concat(h).concat(window.location.search||""))),o(qt.deviceSelectionStep)}}),a===qt.deviceSelectionStep&&Object(m.jsx)(pt,{name:d,roomName:h,setStep:o})]})}function Xt(){var e=He();return Object(m.jsx)(Rt,{variant:"error",headline:"Connection Lost:",message:"Reconnecting to room...",open:"reconnecting"===e})}!function(e){e[e.roomNameStep=0]="roomNameStep",e[e.deviceSelectionStep=1]="deviceSelectionStep"}(qt||(qt={}));var $t=Object(d.a)("div")({display:"flex",alignItems:"flex-end","& div":{width:"2px",marginRight:"1px","&:not(:last-child)":{borderRight:"none"}}}),en=[0,1,2,3,4];function tn(e){var t=function(e){var t=Object(i.useState)(e.networkQualityLevel),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){var t=function(e){return c(e)};return c(e.networkQualityLevel),e.on("networkQualityLevelChanged",t),function(){e.off("networkQualityLevelChanged",t)}}),[e]),r}(e.participant);return null===t?null:Object(m.jsx)($t,{children:en.map((function(e){return Object(m.jsx)("div",{style:{height:"".concat(3*(e+1),"px"),background:t>e?"white":"rgba(255, 255, 255, 0.2)"}},e)}))})}var nn=n(82);function rn(){return Object(m.jsx)(Je.a,{title:"Participant is pinned. Click to un-pin.",placement:"top",children:Object(m.jsx)(nn.a,{style:{float:"right",background:"rgba(0, 0, 0, 0.5)",padding:"0.1em",boxSizing:"content-box"},width:"26",height:"26",viewBox:"0 0 26 26",children:Object(m.jsx)("path",{fill:"#FFF",fillRule:"evenodd",strokeWidth:"0",d:"M15.808 4.489c.208-.207.544-.207.75 0l4.953 4.952c.207.207.207.543 0 .75l-1.415 1.415c-.207.208-.543.208-.75 0l-.333-.333-3.007 3.007v2.611c0 .113-.035.222-.1.312l-.055.063-1.06 1.062c-.208.207-.544.207-.751 0l-2.809-2.81-5.992 5.993c-.207.207-.543.207-.75 0-.184-.184-.205-.47-.062-.677l.062-.073 5.991-5.993-2.808-2.808c-.184-.184-.204-.47-.061-.677l.061-.073 1.062-1.061c.1-.1.234-.156.375-.156h2.61l3.007-3.007-.332-.332c-.185-.184-.205-.47-.062-.677l.062-.073zm.376 1.125l-.666.664.333.333c.185.184.205.47.062.677l-.062.074-3.537 3.537c-.1.1-.234.155-.375.155h-2.61l-.531.531 2.803 2.803.005.006.005.005 2.804 2.803.53-.531v-2.61c0-.112.036-.221.102-.311l.054-.064 3.537-3.537c.208-.208.544-.208.75 0l.333.332.664-.666-4.201-4.201z"})})})}function cn(e){var t=Object(i.useState)(e&&e.isSwitchedOff),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){if(c(e&&e.isSwitchedOff),e){var t=function(){return c(!0)},n=function(){return c(!1)};return e.on("switchedOff",t),e.on("switchedOn",n),function(){e.off("switchedOff",t),e.off("switchedOn",n)}}}),[e]),!!r}var an=n(71);function on(e){var t=Object(i.useState)([]),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){c(Array.from(e.tracks.values()));var t=function(e){return c((function(t){return[].concat(Object(an.a)(t),[e])}))},n=function(e){return c((function(t){return t.filter((function(t){return t!==e}))}))};return e.on("trackPublished",t),e.on("trackUnpublished",n),function(){e.off("trackPublished",t),e.off("trackUnpublished",n)}}),[e]),r}function sn(e){var t=Object(i.useState)(e&&e.track),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){if(c(e&&e.track),e){var t=function(){return c(null)};return e.on("subscribed",c),e.on("unsubscribed",t),function(){e.off("subscribed",c),e.off("unsubscribed",t)}}}),[e]),r}function ln(e){var t=Object(i.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){var t=function(){return c(!0)},n=function(){return c(!1)};return n(),e.on("reconnecting",t),e.on("reconnected",n),function(){e.off("reconnecting",t),e.off("reconnected",n)}}),[e]),r}var dn=Object(u.a)((function(e){return Object(j.a)({container:Object(l.a)({position:"relative",display:"flex",alignItems:"center",height:0,overflow:"hidden",marginBottom:"2em","& video":{filter:"none",objectFit:"contain !important"},borderRadius:"4px",border:"".concat(e.participantBorderWidth,"px solid rgb(245, 248, 255)"),paddingTop:"calc(".concat(56.25,"% - ").concat(e.participantBorderWidth,"px)"),background:"black"},e.breakpoints.down("sm"),{height:e.sidebarMobileHeight,width:"".concat(16*e.sidebarMobileHeight/9,"px"),marginRight:"8px",marginBottom:"0",fontSize:"10px",paddingTop:"".concat(e.sidebarMobileHeight-2,"px")}),innerContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},infoContainer:{position:"absolute",zIndex:2,display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",width:"100%",background:"transparent",top:0},avatarContainer:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1},e.breakpoints.down("sm"),{"& svg":{transform:"scale(0.7)"}}),reconnectingContainer:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(40, 42, 43, 0.75)",zIndex:1},screenShareIconContainer:{background:"rgba(0, 0, 0, 0.5)",padding:"0.18em 0.3em",marginRight:"0.3em",display:"flex","& path":{fill:"white"}},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.18em 0.3em",margin:0,display:"flex",alignItems:"center"},infoRowBottom:{display:"flex",justifyContent:"space-between",position:"absolute",bottom:0,left:0},networkQualityContainer:{width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)"},typeography:Object(l.a)({color:"white"},e.breakpoints.down("sm"),{fontSize:"0.75rem"}),hideParticipant:{display:"none"},cursorPointer:{cursor:"pointer"}})}));function un(e){var t,n=e.participant,i=e.onClick,r=e.isSelected,c=e.children,a=e.isLocalParticipant,o=e.hideParticipant,s=on(n),d=s.find((function(e){return"audio"===e.kind})),u=s.find((function(e){return e.trackName.includes("camera")})),j=Boolean(u),b=s.find((function(e){return e.trackName.includes("screen")})),f=cn(sn(u)),v=sn(d),O=ln(n),p=dn();return Object(m.jsxs)("div",{className:Object(h.a)(p.container,(t={},Object(l.a)(t,p.hideParticipant,o),Object(l.a)(t,p.cursorPointer,Boolean(i)),t)),onClick:i,"data-cy-participant":n.identity,children:[Object(m.jsxs)("div",{className:p.infoContainer,children:[Object(m.jsx)("div",{className:p.networkQualityContainer,children:Object(m.jsx)(tn,{participant:n})}),Object(m.jsxs)("div",{className:p.infoRowBottom,children:[b&&Object(m.jsx)("span",{className:p.screenShareIconContainer,children:Object(m.jsx)(qe,{})}),Object(m.jsxs)("span",{className:p.identity,children:[Object(m.jsx)(pe,{audioTrack:v}),Object(m.jsxs)(xe.a,{variant:"body1",className:p.typeography,component:"span",children:[n.identity,a&&" (You)"]})]})]}),Object(m.jsx)("div",{children:r&&Object(m.jsx)(rn,{})})]}),Object(m.jsxs)("div",{className:p.innerContainer,children:[(!j||f)&&Object(m.jsx)("div",{className:p.avatarContainer,children:Object(m.jsx)(it,{})}),O&&Object(m.jsx)("div",{className:p.reconnectingContainer,children:Object(m.jsx)(xe.a,{variant:"body1",className:p.typeography,children:"Reconnecting..."})}),c]})]})}function jn(e){var t=e.track,n=de().activeSinkId,r=Object(i.useRef)();return Object(i.useEffect)((function(){return r.current=t.attach(),r.current.setAttribute("data-cy-audio-track-name",t.name),document.body.appendChild(r.current),function(){return t.detach().forEach((function(e){return e.remove()}))}}),[t]),Object(i.useEffect)((function(){var e,t;null===(e=r.current)||void 0===e||null===(t=e.setSinkId)||void 0===t||t.call(e,n)}),[n]),null}function bn(e){var t=e.publication,n=e.isLocalParticipant,i=e.videoOnly,r=e.videoPriority,c=sn(t);if(!c)return null;switch(c.kind){case"video":return Object(m.jsx)(Te,{track:c,priority:r,isLocal:c.name.includes("camera")&&n});case"audio":return i?null:Object(m.jsx)(jn,{track:c});default:return null}}function hn(e){var t,n=e.participant,i=e.videoOnly,r=e.enableScreenShare,c=e.videoPriority,a=e.isLocalParticipant,o=on(n);return t=r&&o.some((function(e){return e.trackName.includes("screen")}))?o.filter((function(e){return!e.trackName.includes("camera")})):o.filter((function(e){return!e.trackName.includes("screen")})),Object(m.jsx)(m.Fragment,{children:t.map((function(e){return Object(m.jsx)(bn,{publication:e,participant:n,isLocalParticipant:a,videoOnly:i,videoPriority:c},e.kind)}))})}function fn(e){var t=e.participant,n=e.videoOnly,i=e.enableScreenShare,r=e.onClick,c=e.isSelected,a=e.isLocalParticipant,o=e.hideParticipant;return Object(m.jsx)(un,{participant:t,onClick:r,isSelected:c,isLocalParticipant:a,hideParticipant:o,children:Object(m.jsx)(hn,{participant:t,videoOnly:n,enableScreenShare:i,isLocalParticipant:a})})}function mn(){var e=M().room,t=Object(i.useState)(e.dominantSpeaker),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){var t=function(e){null!==e&&c(e)},n=function(e){c((function(t){return t===e?null:t}))};return e.on("dominantSpeakerChanged",t),e.on("participantDisconnected",n),function(){e.off("dominantSpeakerChanged",t),e.off("participantDisconnected",n)}}),[e]),r}function vn(){var e=M().room,t=mn(),n=Object(i.useState)(Array.from(e.participants.values())),r=Object(f.a)(n,2),c=r[0],a=r[1];return Object(i.useEffect)((function(){t&&a((function(e){return[t].concat(Object(an.a)(e.filter((function(e){return e!==t}))))}))}),[t]),Object(i.useEffect)((function(){var t=function(e){return a((function(t){return[].concat(Object(an.a)(t),[e])}))},n=function(e){return a((function(t){return t.filter((function(t){return t!==e}))}))};return e.on("participantConnected",t),e.on("participantDisconnected",n),function(){e.off("participantConnected",t),e.off("participantDisconnected",n)}}),[e]),c}function On(){var e=O(),t=Object(f.a)(e,1)[0],n=Qe(),i=mn(),r=vn(),c=M().room.localParticipant;return t||(n!==c?n:null)||i||r[0]||c}var pn=Object(u.a)((function(e){return Object(j.a)({container:Object(l.a)({overflowY:"auto",background:"rgb(79, 83, 85)",gridArea:"1 / 2 / 1 / 3",zIndex:5},e.breakpoints.down("sm"),{gridArea:"2 / 1 / 3 / 3",overflowY:"initial",overflowX:"auto",display:"flex"}),transparentBackground:{background:"transparent"},scrollContainer:{display:"flex",justifyContent:"center"},innerScrollContainer:Object(l.a)({width:"calc(".concat(e.sidebarWidth,"px - 4em)"),padding:"2em 0"},e.breakpoints.down("sm"),{width:"auto",padding:"".concat(e.sidebarMobilePadding,"px"),display:"flex"})})}));function xn(){var e=pn(),t=M().room.localParticipant,n=vn(),i=O(),r=Object(f.a)(i,2),c=r[0],a=r[1],o=Qe(),s=On(),d=o&&o!==t;return 0===n.length?null:Object(m.jsx)("aside",{className:Object(h.a)(e.container,Object(l.a)({},e.transparentBackground,!d)),children:Object(m.jsx)("div",{className:e.scrollContainer,children:Object(m.jsxs)("div",{className:e.innerScrollContainer,children:[Object(m.jsx)(fn,{participant:t,isLocalParticipant:!0}),n.map((function(e){var t=e===s&&e!==o&&!(e===c);return Object(m.jsx)(fn,{participant:e,isSelected:e===c,onClick:function(){return a(e)},hideParticipant:t},e.sid)}))]})})})}var gn=Object(u.a)((function(e){return{container:{position:"relative",display:"flex",alignItems:"center"},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.1em 0.3em 0.1em 0",fontSize:"1.2em",display:"inline-flex","& svg":{marginLeft:"0.3em"}},infoContainer:{position:"absolute",zIndex:2,height:"100%",width:"100%"},reconnectingContainer:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(40, 42, 43, 0.75)",zIndex:1},fullWidth:Object(l.a)({gridArea:"1 / 1 / 2 / 3"},e.breakpoints.down("sm"),{gridArea:"1 / 1 / 3 / 3"}),avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1,"& svg":{transform:"scale(2)"}}}}));function wn(e){var t=e.participant,n=e.children,i=gn(),r=M().room.localParticipant,c=r===t,a=Qe(),o=a&&a!==r,s=on(t),d=s.find((function(e){return e.trackName.includes("camera")})),u=s.find((function(e){return e.trackName.includes("screen")})),j=sn(u||d),b=Boolean(j),f=sn(s.find((function(e){return"audio"===e.kind}))),v=cn(j),O=ln(t);return Object(m.jsxs)("div",{"data-cy-main-participant":!0,"data-cy-participant":t.identity,className:Object(h.a)(i.container,Object(l.a)({},i.fullWidth,!o)),children:[Object(m.jsx)("div",{className:i.infoContainer,children:Object(m.jsxs)("div",{className:i.identity,children:[Object(m.jsx)(pe,{audioTrack:f}),Object(m.jsxs)(xe.a,{variant:"body1",color:"inherit",children:[t.identity,c&&" (You)",u&&" - Screen"]})]})}),(!b||v)&&Object(m.jsx)("div",{className:i.avatarContainer,children:Object(m.jsx)(it,{})}),O&&Object(m.jsx)("div",{className:i.reconnectingContainer,children:Object(m.jsx)(xe.a,{variant:"body1",style:{color:"white"},children:"Reconnecting..."})}),n]})}function kn(){var e=On(),t=M().room.localParticipant,n=O(),i=Object(f.a)(n,1)[0],r=Qe(),c=e!==i&&e!==r||e===t?null:"high";return Object(m.jsx)(wn,{participant:e,children:Object(m.jsx)(hn,{participant:e,videoOnly:!0,enableScreenShare:e!==t,videoPriority:c,isLocalParticipant:e===t})})}var Cn=Object(d.a)("div")((function(e){var t=e.theme,n="".concat(t.sidebarMobileHeight+2*t.sidebarMobilePadding+t.participantBorderWidth,"px");return Object(l.a)({position:"relative",height:"100%",display:"grid",gridTemplateColumns:"1fr ".concat(t.sidebarWidth,"px"),gridTemplateRows:"100%"},t.breakpoints.down("sm"),{gridTemplateColumns:"100%",gridTemplateRows:"calc(100% - ".concat(n,") ").concat(n)})}));function Sn(){return Object(m.jsxs)(Cn,{children:[Object(m.jsx)(kn,{}),Object(m.jsx)(xn,{})]})}var yn=Object(d.a)("div")({display:"grid",gridTemplateRows:"1fr auto"}),En=Object(d.a)("main")((function(e){var t=e.theme;return Object(l.a)({overflow:"hidden",paddingBottom:"".concat(t.footerHeight,"px"),background:"black"},t.breakpoints.down("sm"),{paddingBottom:"".concat(t.mobileFooterHeight+t.mobileTopBarHeight,"px")})}));function Tn(){var e=He(),t=function(){var e,t=Object(i.useState)(window.innerHeight*((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1)),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){var e=function(){var e;c(window.innerHeight*((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1))};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),r+"px"}();return Object(m.jsx)(yn,{style:{height:t},children:"disconnected"===e?Object(m.jsx)(Zt,{}):Object(m.jsxs)(En,{children:[Object(m.jsx)(Xt,{}),Object(m.jsx)(nt,{}),Object(m.jsx)(Sn,{}),Object(m.jsx)(et,{})]})})}var Pn=n(48);var Nn=function(e){var t=e.dismissError,n=e.error,i=n||{},r=i.message,c=i.code,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(arguments.length>1?arguments[1]:void 0){case 20101:return e+". Please make sure you are using the correct credentials.";default:return e}}(r,c);return Object(m.jsxs)(U.a,{open:null!==n,onClose:function(){return t()},fullWidth:!0,maxWidth:"xs",children:[Object(m.jsx)(q.a,{children:"ERROR"}),Object(m.jsxs)(G.a,{children:[Object(m.jsx)(Y.a,{children:a}),Boolean(c)&&Object(m.jsx)("pre",{children:Object(m.jsxs)("code",{children:["Error Code: ",c]})})]}),Object(m.jsx)(K.a,{children:Object(m.jsx)(b.a,{onClick:function(){return t()},color:"primary",autoFocus:!0,children:"OK"})})]})},An=n(170),Ln=n.n(An);n.p;var Dn=Object(u.a)((function(e){var t;return{googleButton:(t={background:"white",color:"rgb(0, 94, 166)",borderRadius:"4px",border:"2px solid rgb(2, 122, 197)",margin:"1.8em 0 0.7em",textTransform:"none",boxShadow:"none",padding:"0.3em 1em"},Object(l.a)(t,e.breakpoints.down("sm"),{width:"100%"}),Object(l.a)(t,"&:hover",{background:"white",boxShadow:"none"}),t),errorMessage:{color:"red",display:"flex",alignItems:"center",margin:"1em 0 0.2em","& svg":{marginRight:"0.4em"}},gutterBottom:{marginBottom:"1em"},passcodeContainer:{minHeight:"120px"},submitButton:Object(l.a)({},e.breakpoints.down("sm"),{width:"100%"})}}));function Rn(){var e=Dn(),t=de(),n=t.signIn,r=t.user,c=t.isAuthReady,a=Object(ie.g)(),o=Object(ie.h)(),s=Object(i.useState)(""),l=Object(f.a)(s,2),d=l[0],u=l[1],j=Object(i.useState)(null),h=Object(f.a)(j,2),v=h[0],O=h[1],p=Boolean("passcode");return!r&&p||a.replace("/"),c?Object(m.jsxs)(yt,{children:[!1,Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(xe.a,{variant:"h5",className:e.gutterBottom,children:"Enter passcode to join a room"}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O(null),null===n||void 0===n||n(d).then((function(){var e;a.replace((null===o||void 0===o||null===(e=o.state)||void 0===e?void 0:e.from)||{pathname:"/"})})).catch((function(e){return O(e)}))},children:[Object(m.jsx)(ge.a,{container:!0,justify:"space-between",children:Object(m.jsxs)("div",{className:e.passcodeContainer,children:[Object(m.jsx)(ot.a,{shrink:!0,htmlFor:"input-passcode",children:"Passcode"}),Object(m.jsx)(st.a,{id:"input-passcode",onChange:function(e){return u(e.target.value)},type:"password",variant:"outlined",size:"small"}),Object(m.jsx)("div",{children:v&&Object(m.jsxs)(xe.a,{variant:"caption",className:e.errorMessage,children:[Object(m.jsx)(Ln.a,{}),v.message]})})]})}),Object(m.jsx)(ge.a,{container:!0,justify:"flex-end",children:Object(m.jsx)(b.a,{variant:"contained",color:"primary",type:"submit",disabled:!d.length,className:e.submitButton,children:"Submit"})})]})]})]}):null}var In=n(173);function Bn(e){var t=e.children,n=Object(In.a)(e,["children"]),i=de(),r=i.isAuthReady,c=i.user||!1;return c||r?Object(m.jsx)(ie.b,Object(y.a)(Object(y.a)({},n),{},{render:function(e){var n=e.location;return c?t:Object(m.jsx)(ie.a,{to:{pathname:"/login",state:{from:n}}})}})):null}var _n=n(171),Mn=Object(_n.a)(),zn=Object(_n.a)({overrides:{MuiCssBaseline:{"@global":{"html, body, #root":{height:"100%"}}},MuiButton:{root:{borderRadius:"4px",textTransform:"none",color:"rgb(40, 42, 43)",fontSize:"0.9rem",transition:Mn.transitions.create(["background-color","box-shadow","border","color"],{duration:Mn.transitions.duration.short})},text:{padding:"6px 14px"},contained:{boxShadow:"none","&:hover":{boxShadow:"none"}},outlinedPrimary:{border:"2px solid #027AC5","&:hover":{border:"2px solid rgb(1, 85, 137)"}},startIcon:{marginRight:"6px"}},MuiTypography:{body1:{color:"rgb(40, 42, 43)",fontSize:"0.9rem"}},MuiInputBase:{root:{fontSize:"0.9rem"}},MuiSelect:{root:{padding:"0.85em"}},MuiDialogActions:{root:{padding:"16px"}},MuiTextField:{root:{color:"rgb(40, 42, 43)"}},MuiInputLabel:{root:{color:"rgb(40, 42, 43)",fontSize:"1.1rem",marginBottom:"0.2em",fontWeight:500}},MuiOutlinedInput:{notchedOutline:{borderColor:"rgb(136, 140, 142)"}}},typography:{fontFamily:"Inter, sans-serif"},palette:{primary:{main:"#027AC5"}},brand:"#E22525",footerHeight:72,mobileFooterHeight:56,sidebarWidth:355,sidebarMobileHeight:90,sidebarMobilePadding:8,participantBorderWidth:2,mobileTopBarHeight:52});function Hn(){var e,t=de(),n=t.roomType,i=t.settings,r={bandwidthProfile:{video:{mode:i.bandwidthProfileMode,dominantSpeakerPriority:i.dominantSpeakerPriority,renderDimensions:{low:dt(i.renderDimensionLow),standard:dt(i.renderDimensionStandard),high:dt(i.renderDimensionHigh)},maxTracks:Number(i.maxTracks)}},dominantSpeaker:!0,networkQuality:{local:1,remote:1},maxAudioBitrate:Number(i.maxAudioBitrate),preferredVideoCodecs:[{codec:"VP8",simulcast:"peer-to-peer"!==n&&"go"!==n}]};return w&&(null===r||void 0===r||null===(e=r.bandwidthProfile)||void 0===e?void 0:e.video)&&(r.bandwidthProfile.video.maxSubscriptionBitrate=25e5),k(r)}var Fn=n(363),Vn=n(348),Wn=Object(u.a)({container:{marginTop:"2.5em"},paper:{padding:"1em"},heading:{marginBottom:"0.4em"}}),Un=function(e){var t=e.children,n=Wn();return L.a.isSupported?t:Object(m.jsx)(Fn.a,{children:Object(m.jsx)(ge.a,{container:!0,justify:"center",className:n.container,children:Object(m.jsx)(ge.a,{item:!0,xs:12,sm:6,children:Object(m.jsxs)(Vn.a,{className:n.paper,children:[Object(m.jsx)(xe.a,{variant:"h4",className:n.heading,children:"Browser or context not supported"}),Object(m.jsxs)(xe.a,{children:["Please open this application in one of the"," ",Object(m.jsx)(gt.a,{href:"https://www.twilio.com/docs/video/javascript#supported-browsers",target:"_blank",rel:"noopener",children:"supported browsers"}),".",Object(m.jsx)("br",{}),"If you are using a supported browser, please ensure that this app is served over a"," ",Object(m.jsx)(gt.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts",target:"_blank",rel:"noopener",children:"secure context"})," ","(e.g. https or localhost)."]})]})})})})},Kn=function(){var e=de(),t=e.error,n=e.setError,i=Hn();return Object(m.jsx)(Un,{children:Object(m.jsxs)(_,{options:i,onError:n,children:[Object(m.jsx)(Nn,{dismissError:function(){return n(null)},error:t}),Object(m.jsx)(Tn,{})]})})};a.a.render(Object(m.jsxs)(s.a,{theme:zn,children:[Object(m.jsx)(o.a,{}),Object(m.jsx)(Pn.a,{children:Object(m.jsx)(le,{children:Object(m.jsxs)(ie.d,{children:[Object(m.jsx)(Bn,{exact:!0,path:"/",children:Object(m.jsx)(Kn,{})}),Object(m.jsx)(Bn,{path:"/room/:URLRoomName",children:Object(m.jsx)(Kn,{})}),Object(m.jsx)(ie.b,{path:"/login",children:Object(m.jsx)(Rn,{})}),Object(m.jsx)(ie.a,{to:"/"})]})})})]}),document.getElementById("root"))}},[[310,1,2]]]);
//# sourceMappingURL=main.2118a34d.chunk.js.map